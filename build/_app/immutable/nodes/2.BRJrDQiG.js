var de=Object.defineProperty;var ye=a=>{throw TypeError(a)};var Ke=(a,t,e)=>t in a?de(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var c=(a,t)=>de(a,"name",{value:t,configurable:!0});var w=(a,t,e)=>Ke(a,typeof t!="symbol"?t+"":t,e),kt=(a,t,e)=>t.has(a)||ye("Cannot "+e);var i=(a,t,e)=>(kt(a,t,"read from private field"),e?e.call(a):t.get(a)),f=(a,t,e)=>t.has(a)?ye("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),d=(a,t,e,s)=>(kt(a,t,"write to private field"),s?s.call(a,e):t.set(a,e),e),y=(a,t,e)=>(kt(a,t,"access private method"),e);var Mt=(a,t,e,s)=>({set _(r){d(a,t,r,e)},get _(){return i(a,t,s)}});import{c as Xt,a as T,b as Xe,t as ee}from"../chunks/disclose-version.BbL9ofby.js";import{aG as He,b as Fe,h as _t,R as Re,aH as We,ay as Pt,d as Bt,D as ze,g as Le,H as pe,a8 as ge,a3 as be,aI as we,aJ as me,P as Ct,Q as Gt,as as $e,j as Je,p as Se,f as Qt,a as ke,aF as Ze,au as Ye,J as ts,m as W,c as Nt,r as at,t as Tt,s as es,v as ss}from"../chunks/runtime.DGYXNv_o.js";import{s as ve}from"../chunks/render.BQbOHs_-.js";import{S as Pe,v as Ce,Q as rs,n as D,w as Ie,x as Oe,g as _,k as as,y as Ee,f as De,z as ns,u as je,A as Me,B as is,C as os,e as cs,i as us}from"../chunks/context.CNAOubcP.js";import{s as hs}from"../chunks/snippet.CrnrPYU_.js";import{s as fs}from"../chunks/attributes.BkVHChdm.js";import{p as Be}from"../chunks/proxy.CNLJWbkU.js";import{p as ls,o as Ge,a as ds}from"../chunks/index-client.BWHc50OP.js";import{U as Te,N as ys,P as ps,a as gs,b as Ue,e as Ne,H as bs,p as Ae}from"../chunks/parse.RgkxDUh4.js";import{i as ws}from"../chunks/lifecycle.CWy6Iz8J.js";import{M as ms,i as xe}from"../chunks/infiniteQueryBehavior.CJo7wkMf.js";const Ut=0,At=1,qt=2;function vs(a,t,e,s,r){_t&&Re();var n=a,h=He(),u=Je,m,o,v,l,O=(h?pe:ge)(void 0),j=(h?pe:ge)(void 0),I=!1;function M(g,N){I=!0,N&&(be(p),we(p),me(u)),g===Ut&&e&&(o?Ct(o):o=Bt(()=>e(n))),g===At&&s&&(v?Ct(v):v=Bt(()=>s(n,O))),g===qt&&r&&(l?Ct(l):l=Bt(()=>r(n,j))),g!==Ut&&o&&Gt(o,()=>o=null),g!==At&&v&&Gt(v,()=>v=null),g!==qt&&l&&Gt(l,()=>l=null),N&&(me(null),we(null),be(null),$e())}c(M,"update");var p=Fe(()=>{if(m!==(m=t())){if(We(m)){var g=m;I=!1,g.then(N=>{g===m&&(Pt(O,N),M(At,!0))},N=>{g===m&&(Pt(j,N),M(qt,!0))}),_t?e&&(o=Bt(()=>e(n))):ze(()=>{I||M(Ut,!0)})}else Pt(O,m),M(At,!1);return()=>m=null}});_t&&(n=Le)}c(vs,"await_block");function Is(a,t,e,s,r){var u;_t&&Re();var n=(u=t.$$slots)==null?void 0:u[e],h=!1;n===!0&&(n=t.children,h=!0),n===void 0||n(a,h?()=>s:s)}c(Is,"slot");const se=class se extends Error{constructor(t,e){super(t),this.name="DevalueError",this.path=e.join("")}};c(se,"DevalueError");let ut=se;function _e(a){return Object(a)!==a}c(_e,"is_primitive");const Os=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Es(a){const t=Object.getPrototypeOf(a);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Os}c(Es,"is_plain_object");function Ds(a){return Object.prototype.toString.call(a).slice(8,-1)}c(Ds,"get_type");function js(a){switch(a){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return a<" "?`\\u${a.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}c(js,"get_escaped_char");function z(a){let t="",e=0;const s=a.length;for(let r=0;r<s;r+=1){const n=a[r],h=js(n);h&&(t+=a.slice(e,r)+h,e=r+1)}return`"${e===0?a:t+a.slice(e)}"`}c(z,"stringify_string");function Ms(a){return Object.getOwnPropertySymbols(a).filter(t=>Object.getOwnPropertyDescriptor(a,t).enumerable)}c(Ms,"enumerable_symbols");const Bs=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Qe(a){return Bs.test(a)?"."+a:"["+JSON.stringify(a)+"]"}c(Qe,"stringify_key");function jt(a,t){const e=[],s=new Map,r=[];if(t)for(const o of Object.getOwnPropertyNames(t))r.push({key:o,fn:t[o]});const n=[];let h=0;function u(o){if(typeof o=="function")throw new ut("Cannot stringify a function",n);if(s.has(o))return s.get(o);if(o===void 0)return Te;if(Number.isNaN(o))return ys;if(o===1/0)return ps;if(o===-1/0)return gs;if(o===0&&1/o<0)return Ue;const v=h++;s.set(o,v);for(const{key:O,fn:j}of r){const I=j(o);if(I)return e[v]=`["${O}",${u(I)}]`,v}let l="";if(_e(o))l=Vt(o);else{const O=Ds(o);switch(O){case"Number":case"String":case"Boolean":l=`["Object",${Vt(o)}]`;break;case"BigInt":l=`["BigInt",${o}]`;break;case"Date":l=`["Date","${!isNaN(o.getDate())?o.toISOString():""}"]`;break;case"RegExp":const{source:I,flags:M}=o;l=M?`["RegExp",${z(I)},"${M}"]`:`["RegExp",${z(I)}]`;break;case"Array":l="[";for(let p=0;p<o.length;p+=1)p>0&&(l+=","),p in o?(n.push(`[${p}]`),l+=u(o[p]),n.pop()):l+=bs;l+="]";break;case"Set":l='["Set"';for(const p of o)l+=`,${u(p)}`;l+="]";break;case"Map":l='["Map"';for(const[p,g]of o)n.push(`.get(${_e(p)?Vt(p):"..."})`),l+=`,${u(p)},${u(g)}`,n.pop();l+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const g=Ne(o.buffer);l='["'+O+'","'+g+'"]';break}case"ArrayBuffer":{l=`["ArrayBuffer","${Ne(o)}"]`;break}default:if(!Es(o))throw new ut("Cannot stringify arbitrary non-POJOs",n);if(Ms(o).length>0)throw new ut("Cannot stringify POJOs with symbolic keys",n);if(Object.getPrototypeOf(o)===null){l='["null"';for(const p in o)n.push(Qe(p)),l+=`,${z(p)},${u(o[p])}`,n.pop();l+="]"}else{l="{";let p=!1;for(const g in o)p&&(l+=","),p=!0,n.push(Qe(g)),l+=`${z(g)}:${u(o[g])}`,n.pop();l+="}"}}}return e[v]=l,v}c(u,"flatten");const m=u(a);return m<0?`${m}`:`[${e.join(",")}]`}c(jt,"stringify");function Vt(a){const t=typeof a;return t==="string"?z(a):a instanceof String?z(a.toString()):a===void 0?Te.toString():a===0&&1/a<0?Ue.toString():t==="bigint"?`["BigInt","${a}"]`:String(a)}c(Vt,"stringify_primitive");const F=c(a=>({bridgeWorkerOrigin:(a==null?void 0:a.bridgeWorkerOrigin)??"http://127.0.0.1:8787"}),"resolveModuleOptions"),Kt=c(a=>encodeURIComponent(a),"encodeKey$1");var ht,ft,q,it;const re=class re{constructor(t,e){f(this,q);f(this,ht);f(this,ft);d(this,ht,t);const{bridgeWorkerOrigin:s}=F(e);d(this,ft,s)}async list(t){return await(await y(this,q,it).call(this,"KVNamespace.list",[t])).json()}async put(t,e,s){await y(this,q,it).call(this,"KVNamespace.put",[Kt(t),s],e)}async get(t,e){const{value:s}=await this.getWithMetadata(t,e);return s}async getWithMetadata(t,e){const s=await y(this,q,it).call(this,"KVNamespace.getWithMetadata",[Kt(t),e]);if(s.headers.get("X-BRIDGE-KV-ValueIsNull")==="true")return{value:null,metadata:null,cacheStatus:null};let r;typeof(e==null?void 0:e.type)=="string"?r=e.type:typeof e=="string"?r=e:r="text";let n;r==="json"&&(n=await s.json()),r==="text"&&(n=await s.text()),r==="arrayBuffer"&&(n=await s.arrayBuffer()),r==="stream"&&(n=s.body);const h=Ae(s.headers.get("X-BRIDGE-KV-Metadata")??"[null]"),u=Ae(s.headers.get("X-BRIDGE-KV-CacheStatus")??"[null]");return{value:n,metadata:h,cacheStatus:u}}async delete(t){await y(this,q,it).call(this,"KVNamespace.delete",[Kt(t)])}};ht=new WeakMap,ft=new WeakMap,q=new WeakSet,it=c(async function(t,e,s){const r=await fetch(i(this,ft),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"KV","X-BRIDGE-BINDING-NAME":i(this,ht),"X-BRIDGE-KV-Dispatch":jt({operation:t,parameters:e})},body:s,duplex:"half"});if(!r.ok){const n=await r.text();throw new Error(n)}return r},"#dispatch"),c(re,"KVNamespace$");let Ht=re;var lt,dt;const ae=class ae{constructor(t,e){f(this,lt);f(this,dt);d(this,lt,t);const{bridgeWorkerOrigin:s}=F(e);d(this,dt,s)}async fetch(t,e){const s=new Request(t,e),r=new Request(i(this,dt),s);return r.headers.set("X-BRIDGE-BINDING-MODULE","SERVICE"),r.headers.set("X-BRIDGE-BINDING-NAME",i(this,lt)),r.headers.set("X-BRIDGE-SERVICE-Dispatch",JSON.stringify({operation:"Fetcher.fetch",parameters:[s.url]})),fetch(r)}};lt=new WeakMap,dt=new WeakMap,c(ae,"Fetcher$");let Ft=ae;const nt=c(a=>{const t=new Uint8Array(a.length/2);for(let e=0;e<a.length;e+=2)t[e/2]=parseInt(a.substring(e,e+2),16);return t.buffer},"hexStringToArrayBuffer"),Ns=c(a=>{const t=new Uint8Array(a);let e="";for(let s=0;s<t.length;s++){const r=t[s].toString(16);e+=r.length===1?"0"+r:r}return e},"arrayBufferToHexString"),R=c(a=>encodeURIComponent(a),"encodeKey");var yt;const ne=class ne{constructor(t){f(this,yt);w(this,"md5");w(this,"sha1");w(this,"sha256");w(this,"sha384");w(this,"sha512");d(this,yt,t),this.md5=t.md5?nt(t.md5):void 0,this.sha1=t.sha1?nt(t.sha1):void 0,this.sha256=t.sha256?nt(t.sha256):void 0,this.sha384=t.sha384?nt(t.sha384):void 0,this.sha512=t.sha512?nt(t.sha512):void 0,Object.freeze(this)}toJSON(){return i(this,yt)}};yt=new WeakMap,c(ne,"Checksums$");let Wt=ne;const ie=class ie{constructor(t){w(this,"key");w(this,"version");w(this,"size");w(this,"etag");w(this,"httpEtag");w(this,"checksums");w(this,"uploaded");w(this,"httpMetadata");w(this,"customMetadata");w(this,"range");w(this,"storageClass");var e,s;this.key=t.key,this.version=t.version,this.size=t.size,this.etag=t.etag,this.httpEtag=t.httpEtag,this.checksums=new Wt(t.checksums),this.uploaded=new Date(t.uploaded),this.httpMetadata={...t.httpMetadata,cacheExpiry:(e=t.httpMetadata)!=null&&e.cacheExpiry?new Date(t.httpMetadata.cacheExpiry):void 0},(s=t.httpMetadata)!=null&&s.cacheExpiry||delete this.httpMetadata.cacheExpiry,this.customMetadata=t.customMetadata,this.range=t.range,this.storageClass=t.storageClass,Object.freeze(this)}writeHttpMetadata(t){var e,s,r,n,h,u;(e=this.httpMetadata)!=null&&e.contentType&&t.set("content-type",this.httpMetadata.contentType),(s=this.httpMetadata)!=null&&s.contentLanguage&&t.set("content-language",this.httpMetadata.contentLanguage),(r=this.httpMetadata)!=null&&r.contentDisposition&&t.set("content-disposition",this.httpMetadata.contentDisposition),(n=this.httpMetadata)!=null&&n.contentEncoding&&t.set("content-encoding",this.httpMetadata.contentEncoding),(h=this.httpMetadata)!=null&&h.cacheControl&&t.set("cache-control",this.httpMetadata.cacheControl),(u=this.httpMetadata)!=null&&u.cacheExpiry&&t.set("expires",this.httpMetadata.cacheExpiry.toUTCString())}};c(ie,"HeadResult$");let G=ie;var A;const oe=class oe extends G{constructor(e,s){super(e);f(this,A);d(this,A,s)}get body(){return i(this,A).body??new ReadableStream}get bodyUsed(){return i(this,A).bodyUsed}async arrayBuffer(){return i(this,A).arrayBuffer()}async text(){return i(this,A).text()}async json(){return i(this,A).json()}async blob(){return i(this,A).blob()}};A=new WeakMap,c(oe,"GetResult$");let zt=oe;var V;const ce=class ce{constructor({key:t,uploadId:e},s){f(this,V);w(this,"key");w(this,"uploadId");d(this,V,s),this.key=t,this.uploadId=e,Object.freeze(this)}async uploadPart(t,e){return await(await i(this,V).call(this,"R2MultipartUpload.uploadPart",[R(this.key),this.uploadId,t],e)).json()}async abort(){await i(this,V).call(this,"R2MultipartUpload.abort",[R(this.key),this.uploadId])}async complete(t){const s=await(await i(this,V).call(this,"R2MultipartUpload.complete",[R(this.key),this.uploadId,t])).json();return new G(s)}};V=new WeakMap,c(ce,"R2MultipartUpload$");let Rt=ce;var pt,gt,B,Q;const ue=class ue{constructor(t,e){f(this,B);f(this,pt);f(this,gt);d(this,pt,t);const{bridgeWorkerOrigin:s}=F(e);d(this,gt,s)}async list(t){const s=await(await y(this,B,Q).call(this,"R2Bucket.list",[t])).json();return{...s,objects:s.objects.map(r=>new G(r))}}async put(t,e,s){const n=await(await y(this,B,Q).call(this,"R2Bucket.put",[R(t),null,s],e??void 0)).json();return n===null?null:new G(n)}async get(t,e){const s=await y(this,B,Q).call(this,"R2Bucket.get",[R(t),e]),r=s.headers.get("X-BRIDGE-R2-R2ObjectJSON");if(r){const h=JSON.parse(r);return new zt(h,s)}const n=await s.json();return n===null?null:new G(n)}async head(t){const s=await(await y(this,B,Q).call(this,"R2Bucket.head",[R(t)])).json();return s===null?null:new G(s)}async delete(t){t=typeof t=="string"?R(t):t.map(e=>R(e)),await y(this,B,Q).call(this,"R2Bucket.delete",[t])}async createMultipartUpload(t,e){const r=await(await y(this,B,Q).call(this,"R2Bucket.createMultipartUpload",[R(t),e])).json();return new Rt(r,y(this,B,Q).bind(this))}resumeMultipartUpload(t,e){return new Rt({key:t,uploadId:e},y(this,B,Q).bind(this))}};pt=new WeakMap,gt=new WeakMap,B=new WeakSet,Q=c(async function(t,e,s){const r=await fetch(i(this,gt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"R2","X-BRIDGE-BINDING-NAME":i(this,pt),"X-BRIDGE-R2-Dispatch":jt({operation:t,parameters:e},{Headers:c(n=>n instanceof Headers&&Array.from(n),"Headers"),ArrayBuffer:c(n=>n instanceof ArrayBuffer&&Ns(n),"ArrayBuffer")})},body:s,duplex:"half"});if(!r.ok){const n=await r.text();throw new Error(n)}return r},"#dispatch"),c(ue,"R2Bucket$");let Lt=ue;const As=c(a=>a.map(t=>t instanceof ArrayBuffer?Array.from(new Uint8Array(t)):ArrayBuffer.isView(t)?Array.from(t):t),"encodeBindValues");var K,L,$,X,ot;const St=class St{constructor(t,e,s){f(this,X);f(this,K);f(this,L);f(this,$);d(this,K,t),d(this,L,e),d(this,$,s)}get statement(){return i(this,K)}get params(){return i(this,L)}bind(...t){return new St(i(this,K),As(t),i(this,$))}async first(t){return y(this,X,ot).call(this,"D1PreparedStatement.first",t)}async run(){return y(this,X,ot).call(this,"D1PreparedStatement.run")}async all(){return y(this,X,ot).call(this,"D1PreparedStatement.all")}async raw(){return y(this,X,ot).call(this,"D1PreparedStatement.raw")}};K=new WeakMap,L=new WeakMap,$=new WeakMap,X=new WeakSet,ot=c(async function(t,e){return await(await i(this,$).call(this,t,[i(this,K),i(this,L),e])).json()},"#send"),c(St,"D1PreparedStatement$");let $t=St;var bt,wt,H,ct;const he=class he{constructor(t,e){f(this,H);f(this,bt);f(this,wt);d(this,bt,t);const{bridgeWorkerOrigin:s}=F(e);d(this,wt,s)}prepare(t){return new $t(t,[],y(this,H,ct).bind(this))}async dump(){return await(await y(this,H,ct).call(this,"D1Database.dump",[])).arrayBuffer()}async batch(t){return await(await y(this,H,ct).call(this,"D1Database.batch",[t.map(r=>{const n=r;return[n.statement,n.params]})])).json()}async exec(t){return await(await y(this,H,ct).call(this,"D1Database.exec",[t])).json()}};bt=new WeakMap,wt=new WeakMap,H=new WeakSet,ct=c(async function(t,e){const s=await fetch(i(this,wt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"D1","X-BRIDGE-BINDING-NAME":i(this,bt)},body:jt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),c(he,"D1Database$");let Jt=he;var mt,vt,It,Yt;const fe=class fe{constructor(t,e){f(this,It);f(this,mt);f(this,vt);d(this,mt,t);const{bridgeWorkerOrigin:s}=F(e);d(this,vt,s)}async send(t,e){await y(this,It,Yt).call(this,"Queue.send",[t,e])}async sendBatch(t){await y(this,It,Yt).call(this,"Queue.sendBatch",[t])}};mt=new WeakMap,vt=new WeakMap,It=new WeakSet,Yt=c(async function(t,e){const s=await fetch(i(this,vt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"QUEUE","X-BRIDGE-BINDING-NAME":i(this,mt)},body:jt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),c(fe,"WorkerQueue$");let Zt=fe;var Ot,Et,S,U;const le=class le{constructor(t,e){f(this,S);f(this,Ot);f(this,Et);d(this,Ot,t);const{bridgeWorkerOrigin:s}=F(e);d(this,Et,s)}async describe(){return await(await y(this,S,U).call(this,"VectorizeIndex.describe",[])).json()}async query(t,e){return await(await y(this,S,U).call(this,"VectorizeIndex.query",[t,e])).json()}async insert(t){return await(await y(this,S,U).call(this,"VectorizeIndex.insert",[t])).json()}async upsert(t){return await(await y(this,S,U).call(this,"VectorizeIndex.upsert",[t])).json()}async deleteByIds(t){return await(await y(this,S,U).call(this,"VectorizeIndex.deleteByIds",[t])).json()}async getByIds(t){return await(await y(this,S,U).call(this,"VectorizeIndex.getByIds",[t])).json()}};Ot=new WeakMap,Et=new WeakMap,S=new WeakSet,U=c(async function(t,e){const s=await fetch(i(this,Et),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"VECTORIZE","X-BRIDGE-BINDING-NAME":i(this,Ot)},body:jt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),c(le,"VectorizeIndex$");let te=le;const xs=c(async a=>{const{bridgeWorkerOrigin:t}=F(a),s=await(await fetch(t,{headers:{"X-BRIDGE-INTERNALS":"getBindings","content-type":"application/json"}})).json(),r={};for(const[n,h]of Object.entries(s))h==="d1"&&(r[n]=new Jt(n,a)),h==="kv"&&(r[n]=new Ht(n,a)),h==="queue"&&(r[n]=new Zt(n,a)),h==="r2"&&(r[n]=new Lt(n,a)),h==="service"&&(r[n]=new Ft(n,a)),h==="vectorize"&&(r[n]=new te(n,a));return r},"getBindings");var x,J,_s=(J=class extends Pe{constructor(e={}){super();f(this,x);this.config=e,d(this,x,new Map)}build(e,s,r){const n=s.queryKey,h=s.queryHash??Ce(n,s);let u=this.get(h);return u||(u=new rs({cache:this,queryKey:n,queryHash:h,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(u)),u}add(e){i(this,x).has(e.queryHash)||(i(this,x).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,x).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,x).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){D.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,x).get(e)}getAll(){return[...i(this,x).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Ie(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Ie(e,r)):s}notify(e){D.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){D.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){D.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},x=new WeakMap,c(J,"QueryCache"),J),E,Dt,Z,Qs=(Z=class extends Pe{constructor(e={}){super();f(this,E);f(this,Dt);this.config=e,d(this,E,new Map),d(this,Dt,Date.now())}build(e,s,r){const n=new ms({mutationCache:this,mutationId:++Mt(this,Dt)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){const s=xt(e),r=i(this,E).get(s)??[];r.push(e),i(this,E).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var r;const s=xt(e);if(i(this,E).has(s)){const n=(r=i(this,E).get(s))==null?void 0:r.filter(h=>h!==e);n&&(n.length===0?i(this,E).delete(s):i(this,E).set(s,n))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const s=(r=i(this,E).get(xt(e)))==null?void 0:r.find(n=>n.state.status==="pending");return!s||s===e}runNext(e){var r;const s=(r=i(this,E).get(xt(e)))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){D.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...i(this,E).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Oe(s,r))}findAll(e={}){return this.getAll().filter(s=>Oe(e,s))}notify(e){D.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return D.batch(()=>Promise.all(e.map(s=>s.continue().catch(_))))}},E=new WeakMap,Dt=new WeakMap,c(Z,"MutationCache"),Z);function xt(a){var t;return((t=a.options.scope)==null?void 0:t.id)??String(a.mutationId)}c(xt,"scopeFor");var b,k,P,Y,tt,C,et,st,rt,qe=(rt=class{constructor(t={}){f(this,b);f(this,k);f(this,P);f(this,Y);f(this,tt);f(this,C);f(this,et);f(this,st);d(this,b,t.queryCache||new _s),d(this,k,t.mutationCache||new Qs),d(this,P,t.defaultOptions||{}),d(this,Y,new Map),d(this,tt,new Map),d(this,C,0)}mount(){Mt(this,C)._++,i(this,C)===1&&(d(this,et,as.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,b).onFocus())})),d(this,st,Ee.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,b).onOnline())})))}unmount(){var t,e;Mt(this,C)._--,i(this,C)===0&&((t=i(this,et))==null||t.call(this),d(this,et,void 0),(e=i(this,st))==null||e.call(this),d(this,st,void 0))}isFetching(t){return i(this,b).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,k).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,b).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),r=i(this,b).build(this,s);return t.revalidateIfStale&&r.isStaleByTime(De(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return i(this,b).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),n=i(this,b).get(r.queryHash),h=n==null?void 0:n.state.data,u=ns(e,h);if(u!==void 0)return i(this,b).build(this,r).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return D.batch(()=>i(this,b).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,b).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,b);D.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,b),r={type:"active",...t};return D.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=D.batch(()=>i(this,b).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(_).catch(_)}invalidateQueries(t={},e={}){return D.batch(()=>{if(i(this,b).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=D.batch(()=>i(this,b).findAll(t).filter(n=>!n.isDisabled()).map(n=>{let h=n.fetch(void 0,s);return s.throwOnError||(h=h.catch(_)),n.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(r).then(_)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,b).build(this,e);return s.isStaleByTime(De(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_).catch(_)}fetchInfiniteQuery(t){return t.behavior=xe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_).catch(_)}ensureInfiniteQueryData(t){return t.behavior=xe(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ee.isOnline()?i(this,k).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,b)}getMutationCache(){return i(this,k)}getDefaultOptions(){return i(this,P)}setDefaultOptions(t){d(this,P,t)}setQueryDefaults(t,e){i(this,Y).set(je(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,Y).values()];let s={};return e.forEach(r=>{Me(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){i(this,tt).set(je(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,tt).values()];let s={};return e.forEach(r=>{Me(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,P).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ce(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===is&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,P).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,b).clear(),i(this,k).clear()}},b=new WeakMap,k=new WeakMap,P=new WeakMap,Y=new WeakMap,tt=new WeakMap,C=new WeakMap,et=new WeakMap,st=new WeakMap,c(rt,"QueryClient"),rt);function Rs(a,t){Se(t,!1);let e=ls(t,"client",24,()=>new qe);Ge(()=>{e().mount()}),os(e()),ds(()=>{e().unmount()}),ws();var s=Xt(),r=Qt(s);Is(r,t,"default",{}),T(a,s),ke()}c(Rs,"QueryClientProvider");var Ss=ee("<li><a> </a></li>"),ks=ee('<div class="selector svelte-1cx62vm"><ul></ul></div> <!>',1),Ps=ee("<pre> </pre>");function Ls(a,t){Se(t,!0);const e={D1Database$:"D1",KVNamespace$:"KV",R2Bucket$:"R2"},s={bindings:{}};Ze("appContext",s);let r=Ye(Be(new Promise(()=>{})));Ge(()=>{ts(r,Be(fetch("/settings.json").then(u=>u.json()).then(u=>u.bridgeOrigin).then(u=>xs({bridgeWorkerOrigin:u})).then(u=>(s.bindings=u,globalThis.env=u,u))))});var n=Xt(),h=Qt(n);vs(h,()=>W(r),u=>{var m=Xe("🌀 Loading bindings...");T(u,m)},u=>{var m=ks(),o=Qt(m),v=Nt(o);cs(v,21,()=>Object.entries(s.bindings).sort(([O],[j])=>O.localeCompare(j)),us,(O,j)=>{let I=c(()=>W(j)[0],"name"),M=c(()=>W(j)[1],"binding");var p=Ss();const g=ss(()=>e[M().constructor.name]??"-");var N=Nt(p);Tt(()=>fs(N,"href",`/${W(g).toLowerCase()}/${I()}`));var Ve=Nt(N);at(N),at(p),Tt(()=>ve(Ve,`[${W(g)??""}] ${I()??""}`)),T(O,p)}),at(v),at(o);var l=es(o,2);Rs(l,{client:new qe,children:c((O,j)=>{var I=Xt(),M=Qt(I);hs(M,()=>t.children),T(O,I)},"children"),$$slots:{default:!0}}),T(u,m)},(u,m)=>{var o=Ps(),v=Nt(o);at(o),Tt(()=>ve(v,`💥 ${W(m).message??""}`)),T(u,o)}),T(a,n),ke()}c(Ls,"_layout");export{Ls as component};

var ke=Object.defineProperty;var as=(n,t,e)=>t in n?ke(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var u=(n,t)=>ke(n,"name",{value:t,configurable:!0});var I=(n,t,e)=>(as(n,typeof t!="symbol"?t+"":t,e),e),Yt=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var i=(n,t,e)=>(Yt(n,t,"read from private field"),e?e.call(n):t.get(n)),p=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},f=(n,t,e,s)=>(Yt(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e);var Ht=(n,t,e,s)=>({set _(r){f(n,t,r,e)},get _(){return i(n,t,s)}}),y=(n,t,e)=>(Yt(n,t,"access private method"),e);import{G as is,H as cs,I as Wt,J as os,s as Ke,r as Ve,A as Xe,B as He,C as We,o as Le,K as us,e as Se,i as dt,d as R,L as hs,f as It,l as X,g as Dt,h as Ot,m as H,x as q,n as se,E as wt,a as ze,c as Je,j as re,M as ls}from"../chunks/scheduler.868b4e5c.js";import{g as ds,t as Kt,c as fs,a as Vt,S as Ye,i as Ze,b as ps,d as ys,m as ms,e as gs}from"../chunks/index.82e26aad.js";import{r as bs,n as S,t as ws,c as Es,a as O,i as Zt,b as Is,S as ts,h as es,m as Be,d as Ne,f as Re,o as Ae,e as Ds,g as Ce,p as Ue,s as Os,j as Fe}from"../chunks/context.e8a7e09b.js";import{U as ss,N as vs,P as _s,a as js,b as rs,H as Ms,p as qe}from"../chunks/parse.457da179.js";import{R as ks,M as Ss,i as Bs}from"../chunks/infiniteQueryBehavior.747c0a44.js";function Qe(n,t){const e=t.token={};function s(r,a,c,d){if(t.token!==e)return;t.resolved=d;let o=t.ctx;c!==void 0&&(o=o.slice(),o[c]=d);const h=r&&(t.current=r)(o);let g=!1;t.block&&(t.blocks?t.blocks.forEach((l,w)=>{w!==a&&l&&(ds(),Kt(l,1,1,()=>{t.blocks[w]===l&&(t.blocks[w]=null)}),fs())}):t.block.d(1),h.c(),Vt(h,1),h.m(t.mount(),t.anchor),g=!0),t.block=h,t.blocks&&(t.blocks[a]=h),g&&os()}if(u(s,"update"),is(n)){const r=cs();if(n.then(a=>{Wt(r),s(t.then,1,t.value,a),Wt(null)},a=>{if(Wt(r),s(t.catch,2,t.error,a),Wt(null),!t.hasCatch)throw a}),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,n),!0;t.resolved=n}}u(Qe,"handle_promise");function Ns(n,t,e){const s=t.slice(),{resolved:r}=n;n.current===n.then&&(s[n.value]=r),n.current===n.catch&&(s[n.error]=r),n.block.p(s,e)}u(Ns,"update_await_block_branch");const ye=class ye extends Error{constructor(t,e){super(t),this.name="DevalueError",this.path=e.join("")}};u(ye,"DevalueError");let Et=ye;function Ge(n){return Object(n)!==n}u(Ge,"is_primitive");const Rs=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function As(n){const t=Object.getPrototypeOf(n);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Rs}u(As,"is_plain_object");function Cs(n){return Object.prototype.toString.call(n).slice(8,-1)}u(Cs,"get_type");function Us(n){switch(n){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return n<" "?`\\u${n.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}u(Us,"get_escaped_char");function st(n){let t="",e=0;const s=n.length;for(let r=0;r<s;r+=1){const a=n[r],c=Us(a);c&&(t+=n.slice(e,r)+c,e=r+1)}return`"${e===0?n:t+n.slice(e)}"`}u(st,"stringify_string");function Xt(n,t){const e=[],s=new Map,r=[];for(const h in t)r.push({key:h,fn:t[h]});const a=[];let c=0;function d(h){if(typeof h=="function")throw new Et("Cannot stringify a function",a);if(s.has(h))return s.get(h);if(h===void 0)return ss;if(Number.isNaN(h))return vs;if(h===1/0)return _s;if(h===-1/0)return js;if(h===0&&1/h<0)return rs;const g=c++;s.set(h,g);for(const{key:w,fn:v}of r){const b=v(h);if(b)return e[g]=`["${w}",${d(b)}]`,g}let l="";if(Ge(h))l=te(h);else switch(Cs(h)){case"Number":case"String":case"Boolean":l=`["Object",${te(h)}]`;break;case"BigInt":l=`["BigInt",${h}]`;break;case"Date":l=`["Date","${h.toISOString()}"]`;break;case"RegExp":const{source:v,flags:b}=h;l=b?`["RegExp",${st(v)},"${b}"]`:`["RegExp",${st(v)}]`;break;case"Array":l="[";for(let m=0;m<h.length;m+=1)m>0&&(l+=","),m in h?(a.push(`[${m}]`),l+=d(h[m]),a.pop()):l+=Ms;l+="]";break;case"Set":l='["Set"';for(const m of h)l+=`,${d(m)}`;l+="]";break;case"Map":l='["Map"';for(const[m,k]of h)a.push(`.get(${Ge(m)?te(m):"..."})`),l+=`,${d(m)},${d(k)}`;l+="]";break;default:if(!As(h))throw new Et("Cannot stringify arbitrary non-POJOs",a);if(Object.getOwnPropertySymbols(h).length>0)throw new Et("Cannot stringify POJOs with symbolic keys",a);if(Object.getPrototypeOf(h)===null){l='["null"';for(const m in h)a.push(`.${m}`),l+=`,${st(m)},${d(h[m])}`,a.pop();l+="]"}else{l="{";let m=!1;for(const k in h)m&&(l+=","),m=!0,a.push(`.${k}`),l+=`${st(k)}:${d(h[k])}`,a.pop();l+="}"}}return e[g]=l,g}u(d,"flatten");const o=d(n);return o<0?`${o}`:`[${e.join(",")}]`}u(Xt,"stringify");function te(n){const t=typeof n;return t==="string"?st(n):n instanceof String?st(n.toString()):n===void 0?ss.toString():n===0&&1/n<0?rs.toString():t==="bigint"?`["BigInt","${n}"]`:String(n)}u(te,"stringify_primitive");const et=u(n=>({bridgeWorkerOrigin:(n==null?void 0:n.bridgeWorkerOrigin)??"http://127.0.0.1:8787"}),"resolveModuleOptions"),ee=u(n=>encodeURIComponent(n),"encodeKey$1");var vt,_t,W,mt;const me=class me{constructor(t,e){p(this,W);p(this,vt,void 0);p(this,_t,void 0);f(this,vt,t);const{bridgeWorkerOrigin:s}=et(e);f(this,_t,s)}async list(t){return await(await y(this,W,mt).call(this,"KVNamespace.list",[t])).json()}async put(t,e,s){await y(this,W,mt).call(this,"KVNamespace.put",[ee(t),s],e)}async get(t,e){const{value:s}=await this.getWithMetadata(t,e);return s}async getWithMetadata(t,e){const s=await y(this,W,mt).call(this,"KVNamespace.getWithMetadata",[ee(t),e]);if(s.headers.get("X-BRIDGE-KV-ValueIsNull")==="true")return{value:null,metadata:null,cacheStatus:null};let r;typeof(e==null?void 0:e.type)=="string"?r=e.type:typeof e=="string"?r=e:r="text";let a;r==="json"&&(a=await s.json()),r==="text"&&(a=await s.text()),r==="arrayBuffer"&&(a=await s.arrayBuffer()),r==="stream"&&(a=s.body);const c=qe(s.headers.get("X-BRIDGE-KV-Metadata")??"[null]"),d=qe(s.headers.get("X-BRIDGE-KV-CacheStatus")??"[null]");return{value:a,metadata:c,cacheStatus:d}}async delete(t){await y(this,W,mt).call(this,"KVNamespace.delete",[ee(t)])}};vt=new WeakMap,_t=new WeakMap,W=new WeakSet,mt=u(async function(t,e,s){const r=await fetch(i(this,_t),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"KV","X-BRIDGE-BINDING-NAME":i(this,vt),"X-BRIDGE-KV-Dispatch":Xt({operation:t,parameters:e})},body:s,duplex:"half"});if(!r.ok){const a=await r.text();throw new Error(a)}return r},"#dispatch"),u(me,"KVNamespace$");let ne=me;var jt,Mt;const ge=class ge{constructor(t,e){p(this,jt,void 0);p(this,Mt,void 0);f(this,jt,t);const{bridgeWorkerOrigin:s}=et(e);f(this,Mt,s)}async fetch(t,e){const s=new Request(t,e),r=new Request(i(this,Mt),s);return r.headers.set("X-BRIDGE-BINDING-MODULE","SERVICE"),r.headers.set("X-BRIDGE-BINDING-NAME",i(this,jt)),r.headers.set("X-BRIDGE-SERVICE-Dispatch",JSON.stringify({operation:"Fetcher.fetch",parameters:[s.url]})),fetch(r)}};jt=new WeakMap,Mt=new WeakMap,u(ge,"Fetcher$");let ae=ge;const yt=u(n=>{const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e/2]=parseInt(n.substring(e,e+2),16);return t.buffer},"hexStringToArrayBuffer"),Fs=u(n=>{const t=new Uint8Array(n);let e="";for(let s=0;s<t.length;s++){const r=t[s].toString(16);e+=r.length===1?"0"+r:r}return e},"arrayBufferToHexString"),Q=u(n=>encodeURIComponent(n),"encodeKey");var kt;const be=class be{constructor(t){p(this,kt,void 0);I(this,"md5");I(this,"sha1");I(this,"sha256");I(this,"sha384");I(this,"sha512");f(this,kt,t),this.md5=t.md5?yt(t.md5):void 0,this.sha1=t.sha1?yt(t.sha1):void 0,this.sha256=t.sha256?yt(t.sha256):void 0,this.sha384=t.sha384?yt(t.sha384):void 0,this.sha512=t.sha512?yt(t.sha512):void 0,Object.freeze(this)}toJSON(){return i(this,kt)}};kt=new WeakMap,u(be,"Checksums$");let ie=be;const we=class we{constructor(t){I(this,"key");I(this,"version");I(this,"size");I(this,"etag");I(this,"httpEtag");I(this,"checksums");I(this,"uploaded");I(this,"httpMetadata");I(this,"customMetadata");I(this,"range");this.key=t.key,this.version=t.version,this.size=t.size,this.etag=t.etag,this.httpEtag=t.httpEtag,this.checksums=new ie(t.checksums),this.uploaded=new Date(t.uploaded),this.httpMetadata={...t.httpMetadata,cacheExpiry:t.httpMetadata.cacheExpiry?new Date(t.httpMetadata.cacheExpiry):void 0},t.httpMetadata.cacheExpiry||delete this.httpMetadata.cacheExpiry,this.customMetadata=t.customMetadata,this.range=t.range,Object.freeze(this)}writeHttpMetadata(t){var e,s,r,a,c,d;(e=this.httpMetadata)!=null&&e.contentType&&t.set("content-type",this.httpMetadata.contentType),(s=this.httpMetadata)!=null&&s.contentLanguage&&t.set("content-language",this.httpMetadata.contentLanguage),(r=this.httpMetadata)!=null&&r.contentDisposition&&t.set("content-disposition",this.httpMetadata.contentDisposition),(a=this.httpMetadata)!=null&&a.contentEncoding&&t.set("content-encoding",this.httpMetadata.contentEncoding),(c=this.httpMetadata)!=null&&c.cacheControl&&t.set("cache-control",this.httpMetadata.cacheControl),(d=this.httpMetadata)!=null&&d.cacheExpiry&&t.set("expires",this.httpMetadata.cacheExpiry.toUTCString())}};u(we,"HeadResult$");let K=we;var A;const Ee=class Ee extends K{constructor(e,s){super(e);p(this,A,void 0);f(this,A,s)}get body(){return i(this,A).body??new ReadableStream}get bodyUsed(){return i(this,A).bodyUsed}async arrayBuffer(){return i(this,A).arrayBuffer()}async text(){return i(this,A).text()}async json(){return i(this,A).json()}async blob(){return i(this,A).blob()}};A=new WeakMap,u(Ee,"GetResult$");let ce=Ee;var L;const Ie=class Ie{constructor({key:t,uploadId:e},s){p(this,L,void 0);I(this,"key");I(this,"uploadId");f(this,L,s),this.key=t,this.uploadId=e,Object.freeze(this)}async uploadPart(t,e){return await(await i(this,L).call(this,"R2MultipartUpload.uploadPart",[Q(this.key),this.uploadId,t],e)).json()}async abort(){await i(this,L).call(this,"R2MultipartUpload.abort",[Q(this.key),this.uploadId])}async complete(t){const s=await(await i(this,L).call(this,"R2MultipartUpload.complete",[Q(this.key),this.uploadId,t])).json();return new K(s)}};L=new WeakMap,u(Ie,"R2MultipartUpload$");let zt=Ie;var St,Bt,B,U;const De=class De{constructor(t,e){p(this,B);p(this,St,void 0);p(this,Bt,void 0);f(this,St,t);const{bridgeWorkerOrigin:s}=et(e);f(this,Bt,s)}async list(t){const s=await(await y(this,B,U).call(this,"R2Bucket.list",[t])).json();return{...s,objects:s.objects.map(r=>new K(r))}}async put(t,e,s){const a=await(await y(this,B,U).call(this,"R2Bucket.put",[Q(t),null,s],e??void 0)).json();return a===null?null:new K(a)}async get(t,e){const s=await y(this,B,U).call(this,"R2Bucket.get",[Q(t),e]),r=s.headers.get("X-BRIDGE-R2-R2ObjectJSON");if(r){const c=JSON.parse(r);return new ce(c,s)}const a=await s.json();return a===null?null:new K(a)}async head(t){const s=await(await y(this,B,U).call(this,"R2Bucket.head",[Q(t)])).json();return s===null?null:new K(s)}async delete(t){t=typeof t=="string"?Q(t):t.map(e=>Q(e)),await y(this,B,U).call(this,"R2Bucket.delete",[t])}async createMultipartUpload(t,e){const r=await(await y(this,B,U).call(this,"R2Bucket.createMultipartUpload",[Q(t),e])).json();return new zt(r,y(this,B,U).bind(this))}resumeMultipartUpload(t,e){return new zt({key:t,uploadId:e},y(this,B,U).bind(this))}};St=new WeakMap,Bt=new WeakMap,B=new WeakSet,U=u(async function(t,e,s){const r=await fetch(i(this,Bt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"R2","X-BRIDGE-BINDING-NAME":i(this,St),"X-BRIDGE-R2-Dispatch":Xt({operation:t,parameters:e},{Headers:a=>a instanceof Headers&&Array.from(a),ArrayBuffer:a=>a instanceof ArrayBuffer&&Fs(a)})},body:s,duplex:"half"});if(!r.ok){const a=await r.text();throw new Error(a)}return r},"#dispatch"),u(De,"R2Bucket$");let oe=De;const qs=u(n=>n.map(t=>t instanceof ArrayBuffer?Array.from(new Uint8Array(t)):ArrayBuffer.isView(t)?Array.from(t):t),"encodeBindValues");var z,rt,nt,J,gt;const Jt=class Jt{constructor(t,e,s){p(this,J);p(this,z,void 0);p(this,rt,void 0);p(this,nt,void 0);f(this,z,t),f(this,rt,e),f(this,nt,s)}get statement(){return i(this,z)}get params(){return i(this,rt)}bind(...t){return new Jt(i(this,z),qs(t),i(this,nt))}async first(t){return y(this,J,gt).call(this,"D1PreparedStatement.first",t)}async run(){return y(this,J,gt).call(this,"D1PreparedStatement.run")}async all(){return y(this,J,gt).call(this,"D1PreparedStatement.all")}async raw(){return y(this,J,gt).call(this,"D1PreparedStatement.raw")}};z=new WeakMap,rt=new WeakMap,nt=new WeakMap,J=new WeakSet,gt=u(async function(t,e){return await(await i(this,nt).call(this,t,[i(this,z),i(this,rt),e])).json()},"#send"),u(Jt,"D1PreparedStatement$");let ue=Jt;var Nt,Rt,Y,bt;const Oe=class Oe{constructor(t,e){p(this,Y);p(this,Nt,void 0);p(this,Rt,void 0);f(this,Nt,t);const{bridgeWorkerOrigin:s}=et(e);f(this,Rt,s)}prepare(t){return new ue(t,[],y(this,Y,bt).bind(this))}async dump(){return await(await y(this,Y,bt).call(this,"D1Database.dump",[])).arrayBuffer()}async batch(t){return await(await y(this,Y,bt).call(this,"D1Database.batch",[t.map(r=>{const a=r;return[a.statement,a.params]})])).json()}async exec(t){return await(await y(this,Y,bt).call(this,"D1Database.exec",[t])).json()}};Nt=new WeakMap,Rt=new WeakMap,Y=new WeakSet,bt=u(async function(t,e){const s=await fetch(i(this,Rt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"D1","X-BRIDGE-BINDING-NAME":i(this,Nt)},body:Xt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(Oe,"D1Database$");let he=Oe;var At,Ct,Ut,de;const ve=class ve{constructor(t,e){p(this,Ut);p(this,At,void 0);p(this,Ct,void 0);f(this,At,t);const{bridgeWorkerOrigin:s}=et(e);f(this,Ct,s)}async send(t,e){await y(this,Ut,de).call(this,"Queue.send",[t,e])}async sendBatch(t){await y(this,Ut,de).call(this,"Queue.sendBatch",[t])}};At=new WeakMap,Ct=new WeakMap,Ut=new WeakSet,de=u(async function(t,e){const s=await fetch(i(this,Ct),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"QUEUE","X-BRIDGE-BINDING-NAME":i(this,At)},body:Xt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(ve,"WorkerQueue$");let le=ve;var Ft,qt,G,V;const _e=class _e{constructor(t,e){p(this,G);p(this,Ft,void 0);p(this,qt,void 0);f(this,Ft,t);const{bridgeWorkerOrigin:s}=et(e);f(this,qt,s)}async describe(){return await(await y(this,G,V).call(this,"VectorizeIndex.describe",[])).json()}async query(t,e){return await(await y(this,G,V).call(this,"VectorizeIndex.query",[t,e])).json()}async insert(t){return await(await y(this,G,V).call(this,"VectorizeIndex.insert",[t])).json()}async upsert(t){return await(await y(this,G,V).call(this,"VectorizeIndex.upsert",[t])).json()}async deleteByIds(t){return await(await y(this,G,V).call(this,"VectorizeIndex.deleteByIds",[t])).json()}async getByIds(t){return await(await y(this,G,V).call(this,"VectorizeIndex.getByIds",[t])).json()}};Ft=new WeakMap,qt=new WeakMap,G=new WeakSet,V=u(async function(t,e){const s=await fetch(i(this,qt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"VECTORIZE","X-BRIDGE-BINDING-NAME":i(this,Ft)},body:Xt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(_e,"VectorizeIndex$");let fe=_e;const Qs=u(async n=>{const{bridgeWorkerOrigin:t}=et(n),s=await(await fetch(t,{headers:{"X-BRIDGE-INTERNALS":"getBindings","content-type":"application/json"}})).json(),r={};for(const[a,c]of Object.entries(s))c==="d1"&&(r[a]=new he(a,n)),c==="kv"&&(r[a]=new ne(a,n)),c==="queue"&&(r[a]=new le(a,n)),c==="r2"&&(r[a]=new oe(a,n)),c==="service"&&(r[a]=new ae(a,n)),c==="vectorize"&&(r[a]=new fe(a,n));return r},"getBindings");var at,it,_,P,j,D,Qt,Z,ct,Lt,N,F,Gt,Gs=(Gt=class extends ks{constructor(e){super();p(this,ct);p(this,N);p(this,at,void 0);p(this,it,void 0);p(this,_,void 0);p(this,P,void 0);p(this,j,void 0);p(this,D,void 0);p(this,Qt,void 0);p(this,Z,void 0);f(this,Z,!1),f(this,Qt,e.defaultOptions),y(this,ct,Lt).call(this,e.options),f(this,D,[]),f(this,_,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,f(this,at,e.state||Ps(this.options)),this.state=i(this,at),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!i(this,D).length&&this.state.fetchStatus==="idle"&&i(this,_).remove(this)}setData(e,s){const r=bs(this.state.data,e,this.options);return y(this,N,F).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){y(this,N,F).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r;const s=i(this,P);return(r=i(this,j))==null||r.cancel(e),s?s.then(S).catch(S):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,at))}isActive(){return i(this,D).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||i(this,D).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ws(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=i(this,D).find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,j))==null||s.continue()}onOnline(){var s;const e=i(this,D).find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,j))==null||s.continue()}addObserver(e){i(this,D).includes(e)||(i(this,D).push(e),this.clearGcTimeout(),i(this,_).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){i(this,D).includes(e)&&(f(this,D,i(this,D).filter(s=>s!==e)),i(this,D).length||(i(this,j)&&(i(this,Z)?i(this,j).cancel({revert:!0}):i(this,j).cancelRetry()),this.scheduleGc()),i(this,_).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return i(this,D).length}invalidate(){this.state.isInvalidated||y(this,N,F).call(this,{type:"invalidate"})}fetch(e,s){var g,l,w,v;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(i(this,P))return(g=i(this,j))==null||g.continueRetry(),i(this,P)}if(e&&y(this,ct,Lt).call(this,e),!this.options.queryFn){const b=i(this,D).find(m=>m.options.queryFn);b&&y(this,ct,Lt).call(this,b.options)}const r=new AbortController,a={queryKey:this.queryKey,meta:this.meta},c=u(b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(f(this,Z,!0),r.signal)})},"addSignalProperty");c(a);const d=u(()=>this.options.queryFn?(f(this,Z,!1),this.options.persister?this.options.persister(this.options.queryFn,a,this):this.options.queryFn(a)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),"fetchFn"),o={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:d};c(o),(l=this.options.behavior)==null||l.onFetch(o,this),f(this,it,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=o.fetchOptions)==null?void 0:w.meta))&&y(this,N,F).call(this,{type:"fetch",meta:(v=o.fetchOptions)==null?void 0:v.meta});const h=u(b=>{var m,k,ft,pt;Zt(b)&&b.silent||y(this,N,F).call(this,{type:"error",error:b}),Zt(b)||((k=(m=i(this,_).config).onError)==null||k.call(m,b,this),(pt=(ft=i(this,_).config).onSettled)==null||pt.call(ft,this.state.data,b,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},"onError");return f(this,j,Es({fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:b=>{var m,k,ft,pt;if(typeof b>"u"){h(new Error(`${this.queryHash} data is undefined`));return}this.setData(b),(k=(m=i(this,_).config).onSuccess)==null||k.call(m,b,this),(pt=(ft=i(this,_).config).onSettled)==null||pt.call(ft,b,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(b,m)=>{y(this,N,F).call(this,{type:"failed",failureCount:b,error:m})},onPause:()=>{y(this,N,F).call(this,{type:"pause"})},onContinue:()=>{y(this,N,F).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode})),f(this,P,i(this,j).promise),i(this,P)}},at=new WeakMap,it=new WeakMap,_=new WeakMap,P=new WeakMap,j=new WeakMap,D=new WeakMap,Qt=new WeakMap,Z=new WeakMap,ct=new WeakSet,Lt=u(function(e){this.options={...i(this,Qt),...e},this.updateGcTime(this.options.gcTime)},"#setOptions"),N=new WeakSet,F=u(function(e){const s=u(r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:Is(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Zt(a)&&a.revert&&i(this,it)?{...i(this,it),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}},"reducer");this.state=s(this.state),O.batch(()=>{i(this,D).forEach(r=>{r.onQueryUpdate()}),i(this,_).notify({query:this,type:"updated",action:e})})},"#dispatch"),u(Gt,"Query"),Gt);function Ps(n){const t=typeof n.initialData=="function"?n.initialData():n.initialData,e=typeof t<"u",s=e?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}u(Ps,"getDefaultState");var C,Pt,xs=(Pt=class extends ts{constructor(e={}){super();p(this,C,void 0);this.config=e,f(this,C,new Map)}build(e,s,r){const a=s.queryKey,c=s.queryHash??es(a,s);let d=this.get(c);return d||(d=new Gs({cache:this,queryKey:a,queryHash:c,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(d)),d}add(e){i(this,C).has(e.queryHash)||(i(this,C).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,C).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,C).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){O.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,C).get(e)}getAll(){return[...i(this,C).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Be(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Be(e,r)):s}notify(e){O.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){O.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){O.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},C=new WeakMap,u(Pt,"QueryCache"),Pt),M,xt,tt,$t,$s=($t=class extends ts{constructor(e={}){super();p(this,M,void 0);p(this,xt,void 0);p(this,tt,void 0);this.config=e,f(this,M,[]),f(this,xt,0)}build(e,s,r){const a=new Ss({mutationCache:this,mutationId:++Ht(this,xt)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){i(this,M).push(e),this.notify({type:"added",mutation:e})}remove(e){f(this,M,i(this,M).filter(s=>s!==e)),this.notify({type:"removed",mutation:e})}clear(){O.batch(()=>{i(this,M).forEach(e=>{this.remove(e)})})}getAll(){return i(this,M)}find(e){const s={exact:!0,...e};return i(this,M).find(r=>Ne(s,r))}findAll(e={}){return i(this,M).filter(s=>Ne(e,s))}notify(e){O.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){return f(this,tt,(i(this,tt)??Promise.resolve()).then(()=>{const e=i(this,M).filter(s=>s.state.isPaused);return O.batch(()=>e.reduce((s,r)=>s.then(()=>r.continue().catch(S)),Promise.resolve()))}).then(()=>{f(this,tt,void 0)})),i(this,tt)}},M=new WeakMap,xt=new WeakMap,tt=new WeakMap,u($t,"MutationCache"),$t),E,x,$,ot,ut,T,ht,lt,Tt,ns=(Tt=class{constructor(t={}){p(this,E,void 0);p(this,x,void 0);p(this,$,void 0);p(this,ot,void 0);p(this,ut,void 0);p(this,T,void 0);p(this,ht,void 0);p(this,lt,void 0);f(this,E,t.queryCache||new xs),f(this,x,t.mutationCache||new $s),f(this,$,t.defaultOptions||{}),f(this,ot,new Map),f(this,ut,new Map),f(this,T,0)}mount(){Ht(this,T)._++,i(this,T)===1&&(f(this,ht,Re.subscribe(()=>{Re.isFocused()&&(this.resumePausedMutations(),i(this,E).onFocus())})),f(this,lt,Ae.subscribe(()=>{Ae.isOnline()&&(this.resumePausedMutations(),i(this,E).onOnline())})))}unmount(){var t,e;Ht(this,T)._--,i(this,T)===0&&((t=i(this,ht))==null||t.call(this),f(this,ht,void 0),(e=i(this,lt))==null||e.call(this),f(this,lt,void 0))}isFetching(t){return i(this,E).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,x).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=i(this,E).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=i(this,E).find({queryKey:t}),a=r==null?void 0:r.state.data,c=Ds(e,a);if(typeof c>"u")return;const d=this.defaultQueryOptions({queryKey:t});return i(this,E).build(this,d).setData(c,{...s,manual:!0})}setQueriesData(t,e,s){return O.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var e;return(e=i(this,E).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=i(this,E);O.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,E),r={type:"active",...t};return O.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=O.batch(()=>i(this,E).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(S).catch(S)}invalidateQueries(t={},e={}){return O.batch(()=>{if(i(this,E).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=O.batch(()=>i(this,E).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let c=a.fetch(void 0,s);return s.throwOnError||(c=c.catch(S)),a.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(S)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const s=i(this,E).build(this,e);return s.isStaleByTime(e.staleTime)?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(S).catch(S)}fetchInfiniteQuery(t){return t.behavior=Bs(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(S).catch(S)}resumePausedMutations(){return i(this,x).resumePausedMutations()}getQueryCache(){return i(this,E)}getMutationCache(){return i(this,x)}getDefaultOptions(){return i(this,$)}setDefaultOptions(t){f(this,$,t)}setQueryDefaults(t,e){i(this,ot).set(Ce(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,ot).values()];let s={};return e.forEach(r=>{Ue(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){i(this,ut).set(Ce(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,ut).values()];let s={};return e.forEach(r=>{Ue(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...i(this,$).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=es(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,$).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,E).clear(),i(this,x).clear()}},E=new WeakMap,x=new WeakMap,$=new WeakMap,ot=new WeakMap,ut=new WeakMap,T=new WeakMap,ht=new WeakMap,lt=new WeakMap,u(Tt,"QueryClient"),Tt);function Ts(n){let t;const e=n[2].default,s=Ve(e,n,n[1],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,a){s&&s.m(r,a),t=!0},p(r,[a]){s&&s.p&&(!t||a&2)&&Xe(s,e,r,r[1],t?We(e,r[1],a,null):He(r[1]),null)},i(r){t||(Vt(s,r),t=!0)},o(r){Kt(s,r),t=!1},d(r){s&&s.d(r)}}}u(Ts,"create_fragment$1");function Ks(n,t,e){let{$$slots:s={},$$scope:r}=t,{client:a=new ns}=t;return Le(()=>{a.mount()}),Os(a),us(()=>{a.unmount()}),n.$$set=c=>{"client"in c&&e(0,a=c.client),"$$scope"in c&&e(1,r=c.$$scope)},[a,r,s]}u(Ks,"instance$1");const je=class je extends Ye{constructor(t){super(),Ze(this,t,Ks,Ts,Ke,{client:0})}};u(je,"QueryClientProvider");let pe=je;function Pe(n,t,e){const s=n.slice();s[5]=t[e][0],s[6]=t[e][1];const r=s[2][s[6].constructor.name]??"-";return s[7]=r,s}u(Pe,"get_each_context");function Vs(n){let t,e,s=n[10].message+"",r;return{c(){t=It("pre"),e=X("💥 "),r=X(s)},l(a){t=Dt(a,"PRE",{});var c=Ot(t);e=H(c,"💥 "),r=H(c,s),c.forEach(R)},m(a,c){dt(a,t,c),q(t,e),q(t,r)},p(a,c){c&2&&s!==(s=a[10].message+"")&&se(r,s)},i:wt,o:wt,d(a){a&&R(t)}}}u(Vs,"create_catch_block");function Xs(n){let t,e,s,r,a,c=Fe(Object.entries(n[0].bindings).sort($e)),d=[];for(let o=0;o<c.length;o+=1)d[o]=xe(Pe(n,c,o));return r=new pe({props:{client:new ns,$$slots:{default:[Hs]},$$scope:{ctx:n}}}),{c(){t=It("div"),e=It("ul");for(let o=0;o<d.length;o+=1)d[o].c();s=ze(),ps(r.$$.fragment),this.h()},l(o){t=Dt(o,"DIV",{class:!0});var h=Ot(t);e=Dt(h,"UL",{});var g=Ot(e);for(let l=0;l<d.length;l+=1)d[l].l(g);g.forEach(R),h.forEach(R),s=Je(o),ys(r.$$.fragment,o),this.h()},h(){re(t,"class","selector svelte-1cx62vm")},m(o,h){dt(o,t,h),q(t,e);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(e,null);dt(o,s,h),ms(r,o,h),a=!0},p(o,h){if(h&5){c=Fe(Object.entries(o[0].bindings).sort($e));let l;for(l=0;l<c.length;l+=1){const w=Pe(o,c,l);d[l]?d[l].p(w,h):(d[l]=xe(w),d[l].c(),d[l].m(e,null))}for(;l<d.length;l+=1)d[l].d(1);d.length=c.length}const g={};h&16&&(g.$$scope={dirty:h,ctx:o}),r.$set(g)},i(o){a||(Vt(r.$$.fragment,o),a=!0)},o(o){Kt(r.$$.fragment,o),a=!1},d(o){o&&(R(t),R(s)),ls(d,o),gs(r,o)}}}u(Xs,"create_then_block");function xe(n){let t,e,s,r=n[7]+"",a,c,d=n[5]+"",o,h,g;return{c(){t=It("li"),e=It("a"),s=X("["),a=X(r),c=X("] "),o=X(d),g=ze(),this.h()},l(l){t=Dt(l,"LI",{});var w=Ot(t);e=Dt(w,"A",{href:!0});var v=Ot(e);s=H(v,"["),a=H(v,r),c=H(v,"] "),o=H(v,d),v.forEach(R),g=Je(w),w.forEach(R),this.h()},h(){re(e,"href",h=`/${n[7].toLowerCase()}/${n[5]}`)},m(l,w){dt(l,t,w),q(t,e),q(e,s),q(e,a),q(e,c),q(e,o),q(t,g)},p(l,w){w&1&&r!==(r=l[7]+"")&&se(a,r),w&1&&d!==(d=l[5]+"")&&se(o,d),w&1&&h!==(h=`/${l[7].toLowerCase()}/${l[5]}`)&&re(e,"href",h)},d(l){l&&R(t)}}}u(xe,"create_each_block");function Hs(n){let t;const e=n[3].default,s=Ve(e,n,n[4],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,a){s&&s.m(r,a),t=!0},p(r,a){s&&s.p&&(!t||a&16)&&Xe(s,e,r,r[4],t?We(e,r[4],a,null):He(r[4]),null)},i(r){t||(Vt(s,r),t=!0)},o(r){Kt(s,r),t=!1},d(r){s&&s.d(r)}}}u(Hs,"create_default_slot");function Ws(n){let t;return{c(){t=X("🌀 Loading bindings...")},l(e){t=H(e,"🌀 Loading bindings...")},m(e,s){dt(e,t,s)},p:wt,i:wt,o:wt,d(e){e&&R(t)}}}u(Ws,"create_pending_block");function Ls(n){let t,e,s,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Ws,then:Xs,catch:Vs,error:10,blocks:[,,,]};return Qe(e=n[1],r),{c(){t=Se(),r.block.c()},l(a){t=Se(),r.block.l(a)},m(a,c){dt(a,t,c),r.block.m(a,r.anchor=c),r.mount=()=>t.parentNode,r.anchor=t,s=!0},p(a,[c]){n=a,r.ctx=n,c&2&&e!==(e=n[1])&&Qe(e,r)||Ns(r,n,c)},i(a){s||(Vt(r.block),s=!0)},o(a){for(let c=0;c<3;c+=1){const d=r.blocks[c];Kt(d)}s=!1},d(a){a&&R(t),r.block.d(a),r.token=null,r=null}}}u(Ls,"create_fragment");const $e=u(([n],[t])=>n.localeCompare(t),"func");function zs(n,t,e){let{$$slots:s={},$$scope:r}=t;const a={D1Database$:"D1",KVNamespace$:"KV",R2Bucket$:"R2"},c={bindings:{}};hs("appContext",c);let d=new Promise(()=>{});return Le(()=>{e(1,d=fetch("/settings.json").then(o=>o.json()).then(o=>o.bridgeOrigin).then(o=>Qs({bridgeWorkerOrigin:o})).then(o=>(e(0,c.bindings=o,c),globalThis.env=o,o)))}),n.$$set=o=>{"$$scope"in o&&e(4,r=o.$$scope)},[c,d,a,s,r]}u(zs,"instance");const Me=class Me extends Ye{constructor(t){super(),Ze(this,t,zs,Ls,Ke,{})}};u(Me,"Layout");let Te=Me;export{Te as component};

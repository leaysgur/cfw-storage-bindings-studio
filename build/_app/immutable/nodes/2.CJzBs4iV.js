var ue=Object.defineProperty;var Se=(n,t,e)=>t in n?ue(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var u=(n,t)=>ue(n,"name",{value:t,configurable:!0});var w=(n,t,e)=>(Se(n,typeof t!="symbol"?t+"":t,e),e),At=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var i=(n,t,e)=>(At(n,t,"read from private field"),e?e.call(n):t.get(n)),f=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},l=(n,t,e,s)=>(At(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e);var jt=(n,t,e,s)=>({set _(r){l(n,t,r,e)},get _(){return i(n,t,s)}}),p=(n,t,e)=>(At(n,t,"access private method"),e);import{e as Tt,a as G,f as Nt,t as Qt,c as Dt,s as he}from"../chunks/disclose-version.BucBxo4S.js";import{b as ke,af as Pe,a5 as Ce,d as fe,c as St,G as F,ag as le,ah as de,ai as pe,V as _e,f as Ge,p as je,a as De,ae as Te,w as qe,y as Ue,r as kt,l as Pt,K as Mt,J as Ve}from"../chunks/runtime.PM082qKs.js";import{b as Ke,s as ye,a as Ct}from"../chunks/render.DV4Pg5-E.js";import{p as ge}from"../chunks/proxy.DDvSa-S9.js";import{S as Me,p as Be,Q as Xe,n as E,q as we,u as be,f as N,j as We,v as me,w as Fe,o as Ie,x as Oe,s as He,y as Le,e as ze,i as $e}from"../chunks/context.qpJfU0IM.js";import{s as Je}from"../chunks/snippet.eDmVPbBM.js";import{s as Ye}from"../chunks/attributes.AgZSCq3u.js";import{p as Ze,o as Ne,a as ts}from"../chunks/index-client.D7zG_ls3.js";import{U as xe,N as es,P as ss,a as rs,b as Re,H as ns,p as Ee}from"../chunks/parse.6b1VPbjQ.js";import{M as as,i as is}from"../chunks/infiniteQueryBehavior.BOf9TdXX.js";import{i as os}from"../chunks/lifecycle.bk1NrV--.js";function cs(n,t,e,s,r){const a=Ge;let h,o,b,c;function v(m,I){le(d),de(d),pe(a);var j=St(()=>m(n,I));return pe(null),de(null),le(null),_e(),j}u(v,"create_effect");const d=ke(()=>{if(h!==(h=t()))if(Pe(h)){const m=h;e&&(o&&!(o.f&Ce)&&fe(o),o=St(()=>e(n))),b&&F(b),c&&F(c),m.then(I=>{m===h&&(o&&F(o),s&&(b=v(s,I)))},I=>{m===h&&(o&&F(o),r&&(c=v(r,I)))})}else o&&F(o),c&&F(c),s&&(b&&fe(b),b=St(()=>s(n,h)))})}u(cs,"await_block");const $t=class $t extends Error{constructor(t,e){super(t),this.name="DevalueError",this.path=e.join("")}};u($t,"DevalueError");let nt=$t;function ve(n){return Object(n)!==n}u(ve,"is_primitive");const us=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hs(n){const t=Object.getPrototypeOf(n);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===us}u(hs,"is_plain_object");function fs(n){return Object.prototype.toString.call(n).slice(8,-1)}u(fs,"get_type");function ls(n){switch(n){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return n<" "?`\\u${n.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}u(ls,"get_escaped_char");function H(n){let t="",e=0;const s=n.length;for(let r=0;r<s;r+=1){const a=n[r],h=ls(a);h&&(t+=n.slice(e,r)+h,e=r+1)}return`"${e===0?n:t+n.slice(e)}"`}u(H,"stringify_string");function ds(n){return Object.getOwnPropertySymbols(n).filter(t=>Object.getOwnPropertyDescriptor(n,t).enumerable)}u(ds,"enumerable_symbols");function vt(n,t){const e=[],s=new Map,r=[];for(const c in t)r.push({key:c,fn:t[c]});const a=[];let h=0;function o(c){if(typeof c=="function")throw new nt("Cannot stringify a function",a);if(s.has(c))return s.get(c);if(c===void 0)return xe;if(Number.isNaN(c))return es;if(c===1/0)return ss;if(c===-1/0)return rs;if(c===0&&1/c<0)return Re;const v=h++;s.set(c,v);for(const{key:m,fn:I}of r){const j=I(c);if(j)return e[v]=`["${m}",${o(j)}]`,v}let d="";if(ve(c))d=_t(c);else switch(fs(c)){case"Number":case"String":case"Boolean":d=`["Object",${_t(c)}]`;break;case"BigInt":d=`["BigInt",${c}]`;break;case"Date":d=`["Date","${!isNaN(c.getDate())?c.toISOString():""}"]`;break;case"RegExp":const{source:j,flags:_}=c;d=_?`["RegExp",${H(j)},"${_}"]`:`["RegExp",${H(j)}]`;break;case"Array":d="[";for(let g=0;g<c.length;g+=1)g>0&&(d+=","),g in c?(a.push(`[${g}]`),d+=o(c[g]),a.pop()):d+=ns;d+="]";break;case"Set":d='["Set"';for(const g of c)d+=`,${o(g)}`;d+="]";break;case"Map":d='["Map"';for(const[g,A]of c)a.push(`.get(${ve(g)?_t(g):"..."})`),d+=`,${o(g)},${o(A)}`,a.pop();d+="]";break;default:if(!hs(c))throw new nt("Cannot stringify arbitrary non-POJOs",a);if(ds(c).length>0)throw new nt("Cannot stringify POJOs with symbolic keys",a);if(Object.getPrototypeOf(c)===null){d='["null"';for(const g in c)a.push(`.${g}`),d+=`,${H(g)},${o(c[g])}`,a.pop();d+="]"}else{d="{";let g=!1;for(const A in c)g&&(d+=","),g=!0,a.push(`.${A}`),d+=`${H(A)}:${o(c[A])}`,a.pop();d+="}"}}return e[v]=d,v}u(o,"flatten");const b=o(n);return b<0?`${b}`:`[${e.join(",")}]`}u(vt,"stringify");function _t(n){const t=typeof n;return t==="string"?H(n):n instanceof String?H(n.toString()):n===void 0?xe.toString():n===0&&1/n<0?Re.toString():t==="bigint"?`["BigInt","${n}"]`:String(n)}u(_t,"stringify_primitive");const W=u(n=>({bridgeWorkerOrigin:(n==null?void 0:n.bridgeWorkerOrigin)??"http://127.0.0.1:8787"}),"resolveModuleOptions"),Gt=u(n=>encodeURIComponent(n),"encodeKey$1");var at,it,q,et;const Jt=class Jt{constructor(t,e){f(this,q);f(this,at,void 0);f(this,it,void 0);l(this,at,t);const{bridgeWorkerOrigin:s}=W(e);l(this,it,s)}async list(t){return await(await p(this,q,et).call(this,"KVNamespace.list",[t])).json()}async put(t,e,s){await p(this,q,et).call(this,"KVNamespace.put",[Gt(t),s],e)}async get(t,e){const{value:s}=await this.getWithMetadata(t,e);return s}async getWithMetadata(t,e){const s=await p(this,q,et).call(this,"KVNamespace.getWithMetadata",[Gt(t),e]);if(s.headers.get("X-BRIDGE-KV-ValueIsNull")==="true")return{value:null,metadata:null,cacheStatus:null};let r;typeof(e==null?void 0:e.type)=="string"?r=e.type:typeof e=="string"?r=e:r="text";let a;r==="json"&&(a=await s.json()),r==="text"&&(a=await s.text()),r==="arrayBuffer"&&(a=await s.arrayBuffer()),r==="stream"&&(a=s.body);const h=Ee(s.headers.get("X-BRIDGE-KV-Metadata")??"[null]"),o=Ee(s.headers.get("X-BRIDGE-KV-CacheStatus")??"[null]");return{value:a,metadata:h,cacheStatus:o}}async delete(t){await p(this,q,et).call(this,"KVNamespace.delete",[Gt(t)])}};at=new WeakMap,it=new WeakMap,q=new WeakSet,et=u(async function(t,e,s){const r=await fetch(i(this,it),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"KV","X-BRIDGE-BINDING-NAME":i(this,at),"X-BRIDGE-KV-Dispatch":vt({operation:t,parameters:e})},body:s,duplex:"half"});if(!r.ok){const a=await r.text();throw new Error(a)}return r},"#dispatch"),u(Jt,"KVNamespace$");let qt=Jt;var ot,ct;const Yt=class Yt{constructor(t,e){f(this,ot,void 0);f(this,ct,void 0);l(this,ot,t);const{bridgeWorkerOrigin:s}=W(e);l(this,ct,s)}async fetch(t,e){const s=new Request(t,e),r=new Request(i(this,ct),s);return r.headers.set("X-BRIDGE-BINDING-MODULE","SERVICE"),r.headers.set("X-BRIDGE-BINDING-NAME",i(this,ot)),r.headers.set("X-BRIDGE-SERVICE-Dispatch",JSON.stringify({operation:"Fetcher.fetch",parameters:[s.url]})),fetch(r)}};ot=new WeakMap,ct=new WeakMap,u(Yt,"Fetcher$");let Ut=Yt;const tt=u(n=>{const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e/2]=parseInt(n.substring(e,e+2),16);return t.buffer},"hexStringToArrayBuffer"),ps=u(n=>{const t=new Uint8Array(n);let e="";for(let s=0;s<t.length;s++){const r=t[s].toString(16);e+=r.length===1?"0"+r:r}return e},"arrayBufferToHexString"),R=u(n=>encodeURIComponent(n),"encodeKey");var ut;const Zt=class Zt{constructor(t){f(this,ut,void 0);w(this,"md5");w(this,"sha1");w(this,"sha256");w(this,"sha384");w(this,"sha512");l(this,ut,t),this.md5=t.md5?tt(t.md5):void 0,this.sha1=t.sha1?tt(t.sha1):void 0,this.sha256=t.sha256?tt(t.sha256):void 0,this.sha384=t.sha384?tt(t.sha384):void 0,this.sha512=t.sha512?tt(t.sha512):void 0,Object.freeze(this)}toJSON(){return i(this,ut)}};ut=new WeakMap,u(Zt,"Checksums$");let Vt=Zt;const te=class te{constructor(t){w(this,"key");w(this,"version");w(this,"size");w(this,"etag");w(this,"httpEtag");w(this,"checksums");w(this,"uploaded");w(this,"httpMetadata");w(this,"customMetadata");w(this,"range");w(this,"storageClass");var e,s;this.key=t.key,this.version=t.version,this.size=t.size,this.etag=t.etag,this.httpEtag=t.httpEtag,this.checksums=new Vt(t.checksums),this.uploaded=new Date(t.uploaded),this.httpMetadata={...t.httpMetadata,cacheExpiry:(e=t.httpMetadata)!=null&&e.cacheExpiry?new Date(t.httpMetadata.cacheExpiry):void 0},(s=t.httpMetadata)!=null&&s.cacheExpiry||delete this.httpMetadata.cacheExpiry,this.customMetadata=t.customMetadata,this.range=t.range,this.storageClass=t.storageClass,Object.freeze(this)}writeHttpMetadata(t){var e,s,r,a,h,o;(e=this.httpMetadata)!=null&&e.contentType&&t.set("content-type",this.httpMetadata.contentType),(s=this.httpMetadata)!=null&&s.contentLanguage&&t.set("content-language",this.httpMetadata.contentLanguage),(r=this.httpMetadata)!=null&&r.contentDisposition&&t.set("content-disposition",this.httpMetadata.contentDisposition),(a=this.httpMetadata)!=null&&a.contentEncoding&&t.set("content-encoding",this.httpMetadata.contentEncoding),(h=this.httpMetadata)!=null&&h.cacheControl&&t.set("cache-control",this.httpMetadata.cacheControl),(o=this.httpMetadata)!=null&&o.cacheExpiry&&t.set("expires",this.httpMetadata.cacheExpiry.toUTCString())}};u(te,"HeadResult$");let C=te;var M;const ee=class ee extends C{constructor(e,s){super(e);f(this,M,void 0);l(this,M,s)}get body(){return i(this,M).body??new ReadableStream}get bodyUsed(){return i(this,M).bodyUsed}async arrayBuffer(){return i(this,M).arrayBuffer()}async text(){return i(this,M).text()}async json(){return i(this,M).json()}async blob(){return i(this,M).blob()}};M=new WeakMap,u(ee,"GetResult$");let Kt=ee;var U;const se=class se{constructor({key:t,uploadId:e},s){f(this,U,void 0);w(this,"key");w(this,"uploadId");l(this,U,s),this.key=t,this.uploadId=e,Object.freeze(this)}async uploadPart(t,e){return await(await i(this,U).call(this,"R2MultipartUpload.uploadPart",[R(this.key),this.uploadId,t],e)).json()}async abort(){await i(this,U).call(this,"R2MultipartUpload.abort",[R(this.key),this.uploadId])}async complete(t){const s=await(await i(this,U).call(this,"R2MultipartUpload.complete",[R(this.key),this.uploadId,t])).json();return new C(s)}};U=new WeakMap,u(se,"R2MultipartUpload$");let xt=se;var ht,ft,D,x;const re=class re{constructor(t,e){f(this,D);f(this,ht,void 0);f(this,ft,void 0);l(this,ht,t);const{bridgeWorkerOrigin:s}=W(e);l(this,ft,s)}async list(t){const s=await(await p(this,D,x).call(this,"R2Bucket.list",[t])).json();return{...s,objects:s.objects.map(r=>new C(r))}}async put(t,e,s){const a=await(await p(this,D,x).call(this,"R2Bucket.put",[R(t),null,s],e??void 0)).json();return a===null?null:new C(a)}async get(t,e){const s=await p(this,D,x).call(this,"R2Bucket.get",[R(t),e]),r=s.headers.get("X-BRIDGE-R2-R2ObjectJSON");if(r){const h=JSON.parse(r);return new Kt(h,s)}const a=await s.json();return a===null?null:new C(a)}async head(t){const s=await(await p(this,D,x).call(this,"R2Bucket.head",[R(t)])).json();return s===null?null:new C(s)}async delete(t){t=typeof t=="string"?R(t):t.map(e=>R(e)),await p(this,D,x).call(this,"R2Bucket.delete",[t])}async createMultipartUpload(t,e){const r=await(await p(this,D,x).call(this,"R2Bucket.createMultipartUpload",[R(t),e])).json();return new xt(r,p(this,D,x).bind(this))}resumeMultipartUpload(t,e){return new xt({key:t,uploadId:e},p(this,D,x).bind(this))}};ht=new WeakMap,ft=new WeakMap,D=new WeakSet,x=u(async function(t,e,s){const r=await fetch(i(this,ft),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"R2","X-BRIDGE-BINDING-NAME":i(this,ht),"X-BRIDGE-R2-Dispatch":vt({operation:t,parameters:e},{Headers:a=>a instanceof Headers&&Array.from(a),ArrayBuffer:a=>a instanceof ArrayBuffer&&ps(a)})},body:s,duplex:"half"});if(!r.ok){const a=await r.text();throw new Error(a)}return r},"#dispatch"),u(re,"R2Bucket$");let Xt=re;const ys=u(n=>n.map(t=>t instanceof ArrayBuffer?Array.from(new Uint8Array(t)):ArrayBuffer.isView(t)?Array.from(t):t),"encodeBindValues");var V,L,z,K,st;const Rt=class Rt{constructor(t,e,s){f(this,K);f(this,V,void 0);f(this,L,void 0);f(this,z,void 0);l(this,V,t),l(this,L,e),l(this,z,s)}get statement(){return i(this,V)}get params(){return i(this,L)}bind(...t){return new Rt(i(this,V),ys(t),i(this,z))}async first(t){return p(this,K,st).call(this,"D1PreparedStatement.first",t)}async run(){return p(this,K,st).call(this,"D1PreparedStatement.run")}async all(){return p(this,K,st).call(this,"D1PreparedStatement.all")}async raw(){return p(this,K,st).call(this,"D1PreparedStatement.raw")}};V=new WeakMap,L=new WeakMap,z=new WeakMap,K=new WeakSet,st=u(async function(t,e){return await(await i(this,z).call(this,t,[i(this,V),i(this,L),e])).json()},"#send"),u(Rt,"D1PreparedStatement$");let Wt=Rt;var lt,dt,X,rt;const ne=class ne{constructor(t,e){f(this,X);f(this,lt,void 0);f(this,dt,void 0);l(this,lt,t);const{bridgeWorkerOrigin:s}=W(e);l(this,dt,s)}prepare(t){return new Wt(t,[],p(this,X,rt).bind(this))}async dump(){return await(await p(this,X,rt).call(this,"D1Database.dump",[])).arrayBuffer()}async batch(t){return await(await p(this,X,rt).call(this,"D1Database.batch",[t.map(r=>{const a=r;return[a.statement,a.params]})])).json()}async exec(t){return await(await p(this,X,rt).call(this,"D1Database.exec",[t])).json()}};lt=new WeakMap,dt=new WeakMap,X=new WeakSet,rt=u(async function(t,e){const s=await fetch(i(this,dt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"D1","X-BRIDGE-BINDING-NAME":i(this,lt)},body:vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(ne,"D1Database$");let Ft=ne;var pt,yt,gt,Lt;const ae=class ae{constructor(t,e){f(this,gt);f(this,pt,void 0);f(this,yt,void 0);l(this,pt,t);const{bridgeWorkerOrigin:s}=W(e);l(this,yt,s)}async send(t,e){await p(this,gt,Lt).call(this,"Queue.send",[t,e])}async sendBatch(t){await p(this,gt,Lt).call(this,"Queue.sendBatch",[t])}};pt=new WeakMap,yt=new WeakMap,gt=new WeakSet,Lt=u(async function(t,e){const s=await fetch(i(this,yt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"QUEUE","X-BRIDGE-BINDING-NAME":i(this,pt)},body:vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(ae,"WorkerQueue$");let Ht=ae;var wt,bt,Q,T;const ie=class ie{constructor(t,e){f(this,Q);f(this,wt,void 0);f(this,bt,void 0);l(this,wt,t);const{bridgeWorkerOrigin:s}=W(e);l(this,bt,s)}async describe(){return await(await p(this,Q,T).call(this,"VectorizeIndex.describe",[])).json()}async query(t,e){return await(await p(this,Q,T).call(this,"VectorizeIndex.query",[t,e])).json()}async insert(t){return await(await p(this,Q,T).call(this,"VectorizeIndex.insert",[t])).json()}async upsert(t){return await(await p(this,Q,T).call(this,"VectorizeIndex.upsert",[t])).json()}async deleteByIds(t){return await(await p(this,Q,T).call(this,"VectorizeIndex.deleteByIds",[t])).json()}async getByIds(t){return await(await p(this,Q,T).call(this,"VectorizeIndex.getByIds",[t])).json()}};wt=new WeakMap,bt=new WeakMap,Q=new WeakSet,T=u(async function(t,e){const s=await fetch(i(this,bt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"VECTORIZE","X-BRIDGE-BINDING-NAME":i(this,wt)},body:vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(ie,"VectorizeIndex$");let zt=ie;const gs=u(async n=>{const{bridgeWorkerOrigin:t}=W(n),s=await(await fetch(t,{headers:{"X-BRIDGE-INTERNALS":"getBindings","content-type":"application/json"}})).json(),r={};for(const[a,h]of Object.entries(s))h==="d1"&&(r[a]=new Ft(a,n)),h==="kv"&&(r[a]=new qt(a,n)),h==="queue"&&(r[a]=new Ht(a,n)),h==="r2"&&(r[a]=new Xt(a,n)),h==="service"&&(r[a]=new Ut(a,n)),h==="vectorize"&&(r[a]=new zt(a,n));return r},"getBindings");var B,mt,ws=(mt=class extends Me{constructor(e={}){super();f(this,B,void 0);this.config=e,l(this,B,new Map)}build(e,s,r){const a=s.queryKey,h=s.queryHash??Be(a,s);let o=this.get(h);return o||(o=new Xe({cache:this,queryKey:a,queryHash:h,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){i(this,B).has(e.queryHash)||(i(this,B).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,B).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,B).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){E.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,B).get(e)}getAll(){return[...i(this,B).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>we(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>we(e,r)):s}notify(e){E.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){E.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){E.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},B=new WeakMap,u(mt,"QueryCache"),mt),O,It,Ot,bs=(Ot=class extends Me{constructor(e={}){super();f(this,O,void 0);f(this,It,void 0);this.config=e,l(this,O,new Map),l(this,It,Date.now())}build(e,s,r){const a=new as({mutationCache:this,mutationId:++jt(this,It)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){const s=Bt(e),r=i(this,O).get(s)??[];r.push(e),i(this,O).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var r;const s=Bt(e);if(i(this,O).has(s)){const a=(r=i(this,O).get(s))==null?void 0:r.filter(h=>h!==e);a&&(a.length===0?i(this,O).delete(s):i(this,O).set(s,a))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const s=(r=i(this,O).get(Bt(e)))==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}runNext(e){var r;const s=(r=i(this,O).get(Bt(e)))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){E.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...i(this,O).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(r=>be(s,r))}findAll(e={}){return this.getAll().filter(s=>be(e,s))}notify(e){E.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return E.batch(()=>Promise.all(e.map(s=>s.continue().catch(N))))}},O=new WeakMap,It=new WeakMap,u(Ot,"MutationCache"),Ot);function Bt(n){var t;return((t=n.options.scope)==null?void 0:t.id)??String(n.mutationId)}u(Bt,"scopeFor");var y,S,k,$,J,P,Y,Z,Et,Qe=(Et=class{constructor(t={}){f(this,y,void 0);f(this,S,void 0);f(this,k,void 0);f(this,$,void 0);f(this,J,void 0);f(this,P,void 0);f(this,Y,void 0);f(this,Z,void 0);l(this,y,t.queryCache||new ws),l(this,S,t.mutationCache||new bs),l(this,k,t.defaultOptions||{}),l(this,$,new Map),l(this,J,new Map),l(this,P,0)}mount(){jt(this,P)._++,i(this,P)===1&&(l(this,Y,We.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,y).onFocus())})),l(this,Z,me.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,y).onOnline())})))}unmount(){var t,e;jt(this,P)._--,i(this,P)===0&&((t=i(this,Y))==null||t.call(this),l(this,Y,void 0),(e=i(this,Z))==null||e.call(this),l(this,Z,void 0))}isFetching(t){return i(this,y).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,S).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,y).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),r=i(this,y).build(this,s);return t.revalidateIfStale&&r.isStaleByTime(s.staleTime)&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return i(this,y).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),a=i(this,y).get(r.queryHash),h=a==null?void 0:a.state.data,o=Fe(e,h);if(o!==void 0)return i(this,y).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return E.batch(()=>i(this,y).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,y).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,y);E.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,y),r={type:"active",...t};return E.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=E.batch(()=>i(this,y).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(N).catch(N)}invalidateQueries(t={},e={}){return E.batch(()=>{if(i(this,y).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=E.batch(()=>i(this,y).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let h=a.fetch(void 0,s);return s.throwOnError||(h=h.catch(N)),a.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(r).then(N)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,y).build(this,e);return s.isStaleByTime(e.staleTime)?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(N).catch(N)}fetchInfiniteQuery(t){return t.behavior=is(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(N).catch(N)}resumePausedMutations(){return me.isOnline()?i(this,S).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,y)}getMutationCache(){return i(this,S)}getDefaultOptions(){return i(this,k)}setDefaultOptions(t){l(this,k,t)}setQueryDefaults(t,e){i(this,$).set(Ie(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,$).values()];let s={};return e.forEach(r=>{Oe(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){i(this,J).set(Ie(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,J).values()];let s={};return e.forEach(r=>{Oe(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,k).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Be(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===He&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,k).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,y).clear(),i(this,S).clear()}},y=new WeakMap,S=new WeakMap,k=new WeakMap,$=new WeakMap,J=new WeakMap,P=new WeakMap,Y=new WeakMap,Z=new WeakMap,u(Et,"QueryClient"),Et);function ms(n,t){je(t,!1);let e=Ze(t,"client",8,()=>new Qe);Ne(()=>{e().mount()}),Le(e()),ts(()=>{e().unmount()}),os();var s=Tt(),r=Nt(s);Ke(r,t.children,{}),G(n,s),De()}u(ms,"QueryClientProvider");var Is=Qt("🌀 Loading bindings...",1),Os=Qt("<li><a> </a></li>"),Es=Qt('<div class="selector svelte-1cx62vm"><ul></ul></div> <!>',1),vs=Qt("<pre> </pre>");function Cs(n,t){je(t,!0);const e={D1Database$:"D1",KVNamespace$:"KV",R2Bucket$:"R2"},s={bindings:{}};Te("appContext",s);let r=qe(ge(new Promise(()=>{})));Ne(()=>{Ue(r,ge(fetch("/settings.json").then(o=>o.json()).then(o=>o.bridgeOrigin).then(o=>gs({bridgeWorkerOrigin:o})).then(o=>(s.bindings=o,globalThis.env=o,o))))});var a=Tt(),h=Nt(a);cs(h,()=>Pt(r),o=>{var b=Is();G(o,b)},o=>{var b=Es(),c=Nt(b),v=Dt(c);ze(v,73,()=>Object.entries(s.bindings).sort(([m],[I])=>m.localeCompare(I)),$e,(m,I,j)=>{let _=u(()=>Mt(Mt(I))[0],"name"),g=u(()=>Mt(Mt(I))[1],"binding");var A=Os();const oe=Ve(()=>e[g().constructor.name]??"-");var ce=Dt(A);kt(()=>Ye(ce,"href",`/${Pt(oe).toLowerCase()}/${_()}`));var Ae=Dt(ce);kt(()=>ye(Ae,`[${Ct(Pt(oe))}] ${Ct(_())}`)),G(m,A)});var d=he(he(c,!0));ms(d,{client:new Qe,children:(m,I)=>{var j=Tt(),_=Nt(j);Je(()=>t.children,_),G(m,j)}}),G(o,b)},(o,b)=>{var c=vs(),v=Dt(c);kt(()=>ye(v,`💥 ${Ct(b.message)}`)),G(o,c)}),G(n,a),De()}u(Cs,"_layout");export{Cs as component};

var ae=Object.defineProperty;var i=(d,o)=>ae(d,"name",{value:o,configurable:!0});import{a,t as v,e as I,s as r,f as w,c as e}from"../chunks/disclose-version.BucBxo4S.js";import{p as re,I as te,r as _,a as se,l as t,J as b,K as f}from"../chunks/runtime.PM082qKs.js";import{d as ie,s as Q,a as g}from"../chunks/render.DV4Pg5-E.js";import{i as k}from"../chunks/if.C37vJmjH.js";import{e as oe,i as le}from"../chunks/context.qpJfU0IM.js";import{s as ne}from"../chunks/snippet.eDmVPbBM.js";import{s as J}from"../chunks/attributes.AgZSCq3u.js";import{u as ve,s as M,p as ce}from"../chunks/stores.DGAzmXNX.js";import{u as ue,c as de}from"../chunks/createQuery.kb7HYXaV.js";import{e as me}from"../chunks/d1.DaxEI2kX.js";var pe=v("ðŸŒ€ Loading tables...",1),_e=v("<pre> </pre>"),be=i((d,o,c)=>o.invalidateQueries({queryKey:t(c)}),"on_click"),fe=v("<li><a> </a></li>"),ge=v("<li>No tables...</li>"),he=v('<div class="action svelte-rbew6h"><button>Refresh tables list</button></div> <div class="selector svelte-rbew6h"><ul></ul> <ul><li><a>REPL</a></li></ul></div>',1),ye=v('<section class="svelte-rbew6h"><h2 class="svelte-rbew6h"> </h2> <!> <div class="main svelte-rbew6h"><!></div></section>');function Ae(d,o){re(o,!0);const c={};ve(c);const q=i(()=>M(ce,"$page",c),"$page"),l=i(()=>M(t(z),"$tablesQuery",c),"$tablesQuery"),{bindings:S}=te("appContext"),T=ue();let m=b(()=>q().params.bindingName),j=b(()=>S[t(m)]),C=b(()=>["d1",t(m),"tables"]),z=b(()=>de({queryKey:t(C),queryFn:()=>t(j).prepare("PRAGMA table_list").raw().then(s=>s),select:s=>me(s).map(([,n,,h])=>({name:n,ncol:h}))}));var K=ye(),L=e(K),B=e(L),N=r(r(L,!0));k(N,()=>l().isLoading,s=>{var n=pe();a(s,n)},s=>{var n=I(),h=w(n);k(h,()=>l().isError,y=>{var u=_e(),$=e(u);_(()=>Q($,`ðŸ’¥ ${g(l().error.message)}`)),a(y,u)},y=>{var u=I(),$=w(u);k($,()=>l().isSuccess,U=>{var P=he(),R=w(P),A=e(R);A.__click=[be,T,C];var V=r(r(R,!0)),D=e(V);oe(D,73,()=>l().data,le,(x,p,$e)=>{let E=i(()=>f(f(p)).name,"name"),Z=i(()=>f(f(p)).ncol,"ncol");var F=fe(),G=e(F),ee=e(G);_(()=>{J(G,"href",`/d1/${t(m)}/${E()}`),Q(ee,`${g(E())} (${g(Z())} cols)`)}),a(x,F)},x=>{var p=ge();a(x,p)});var W=r(r(D,!0)),X=e(W),Y=e(X);_(()=>{A.disabled=l().isFetching,J(Y,"href",`/d1/${t(m)}/repl`)}),a(U,P)},null,!0),a(y,u)},!0),a(s,n)});var H=r(r(N,!0)),O=e(H);ne(()=>o.children,O),_(()=>Q(B,`[D1] ${g(q().params.bindingName)}`)),a(d,K),se()}i(Ae,"_layout");ie(["click"]);export{Ae as component};

var U=Object.defineProperty;var b=(a,e)=>U(a,"name",{value:e,configurable:!0});import{s as Y,n as N,l as G,m as I,p as J}from"../chunks/scheduler.8c8bb1bf.js";import{S as V,i as W,m as E,s as R,g as O,e as F,n as v,c as L,h as Q,j,f as h,a as y,x as T,z as X,o as C,y as q}from"../chunks/index.c03294ce.js";import{j as w}from"../chunks/context.5b4701d7.js";import{u as Z,c as P}from"../chunks/createQuery.7066ef76.js";import{p as $}from"../chunks/stores.26442ccc.js";function S(a,e,r){const n=a.slice();return n[10]=e[r],n}b(S,"get_each_context");function B(a,e,r){const n=a.slice();return n[13]=e[r],n}b(B,"get_each_context_1");function A(a,e,r){const n=a.slice();return n[16]=e[r],n}b(A,"get_each_context_2");function x(a){let e,r,n,l,t,c=w(Object.keys(a[4].data[0])),i=[];for(let s=0;s<c.length;s+=1)i[s]=H(A(a,c,s));let d=w(a[4].data),u=[];for(let s=0;s<d.length;s+=1)u[s]=K(S(a,d,s));return{c(){e=O("table"),r=O("thead"),n=O("tr");for(let s=0;s<i.length;s+=1)i[s].c();l=R(),t=O("tbody");for(let s=0;s<u.length;s+=1)u[s].c()},l(s){e=Q(s,"TABLE",{});var m=j(e);r=Q(m,"THEAD",{});var o=j(r);n=Q(o,"TR",{});var g=j(n);for(let _=0;_<i.length;_+=1)i[_].l(g);g.forEach(h),o.forEach(h),l=L(m),t=Q(m,"TBODY",{});var k=j(t);for(let _=0;_<u.length;_+=1)u[_].l(k);k.forEach(h),m.forEach(h)},m(s,m){y(s,e,m),T(e,r),T(r,n);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(n,null);T(e,l),T(e,t);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(t,null)},p(s,m){if(m&16){c=w(Object.keys(s[4].data[0]));let o;for(o=0;o<c.length;o+=1){const g=A(s,c,o);i[o]?i[o].p(g,m):(i[o]=H(g),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=c.length}if(m&16){d=w(s[4].data);let o;for(o=0;o<d.length;o+=1){const g=S(s,d,o);u[o]?u[o].p(g,m):(u[o]=K(g),u[o].c(),u[o].m(t,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=d.length}},d(s){s&&h(e),q(i,s),q(u,s)}}}b(x,"create_if_block_2");function ee(a){let e,r,n=a[4].error.message+"",l;return{c(){e=O("pre"),r=E("ðŸ’¥ "),l=E(n)},l(t){e=Q(t,"PRE",{});var c=j(e);r=v(c,"ðŸ’¥ "),l=v(c,n),c.forEach(h)},m(t,c){y(t,e,c),T(e,r),T(e,l)},p(t,c){c&16&&n!==(n=t[4].error.message+"")&&C(l,n)},d(t){t&&h(e)}}}b(ee,"create_if_block_1");function te(a){let e;return{c(){e=E("ðŸŒ€ Loading rows...")},l(r){e=v(r,"ðŸŒ€ Loading rows...")},m(r,n){y(r,e,n)},p:N,d(r){r&&h(e)}}}b(te,"create_if_block");function H(a){let e,r=a[16]+"",n;return{c(){e=O("th"),n=E(r)},l(l){e=Q(l,"TH",{});var t=j(e);n=v(t,r),t.forEach(h)},m(l,t){y(l,e,t),T(e,n)},p(l,t){t&16&&r!==(r=l[16]+"")&&C(n,r)},d(l){l&&h(e)}}}b(H,"create_each_block_2");function z(a){let e,r=a[13]+"",n;return{c(){e=O("td"),n=E(r)},l(l){e=Q(l,"TD",{});var t=j(e);n=v(t,r),t.forEach(h)},m(l,t){y(l,e,t),T(e,n)},p(l,t){t&16&&r!==(r=l[13]+"")&&C(n,r)},d(l){l&&h(e)}}}b(z,"create_each_block_1");function K(a){let e,r,n=w(Object.values(a[10])),l=[];for(let t=0;t<n.length;t+=1)l[t]=z(B(a,n,t));return{c(){e=O("tr");for(let t=0;t<l.length;t+=1)l[t].c();r=R()},l(t){e=Q(t,"TR",{});var c=j(e);for(let i=0;i<l.length;i+=1)l[i].l(c);r=L(c),c.forEach(h)},m(t,c){y(t,e,c);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);T(e,r)},p(t,c){if(c&16){n=w(Object.values(t[10]));let i;for(i=0;i<n.length;i+=1){const d=B(t,n,i);l[i]?l[i].p(d,c):(l[i]=z(d),l[i].c(),l[i].m(e,r))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(t){t&&h(e),q(l,t)}}}b(K,"create_each_block");function le(a){let e,r,n,l,t,c,i,d,u,s,m,o;function g(f,p){if(f[4].isLoading)return te;if(f[4].isError)return ee;if(f[4].isSuccess)return x}b(g,"select_block_type");let k=g(a),_=k&&k(a);return{c(){e=E("d1/"),r=E(a[2]),n=E("/"),l=E(a[0]),t=R(),c=O("button"),i=E("Refresh"),u=R(),_&&_.c(),s=F(),this.h()},l(f){e=v(f,"d1/"),r=v(f,a[2]),n=v(f,"/"),l=v(f,a[0]),t=L(f),c=Q(f,"BUTTON",{});var p=j(c);i=v(p,"Refresh"),p.forEach(h),u=L(f),_&&_.l(f),s=F(),this.h()},h(){c.disabled=d=a[4].isFetching},m(f,p){y(f,e,p),y(f,r,p),y(f,n,p),y(f,l,p),y(f,t,p),y(f,c,p),T(c,i),y(f,u,p),_&&_.m(f,p),y(f,s,p),m||(o=X(c,"click",a[8]),m=!0)},p(f,[p]){p&4&&C(r,f[2]),p&1&&C(l,f[0]),p&16&&d!==(d=f[4].isFetching)&&(c.disabled=d),k===(k=g(f))&&_?_.p(f,p):(_&&_.d(1),_=k&&k(f),_&&(_.c(),_.m(s.parentNode,s)))},i:N,o:N,d(f){f&&(h(e),h(r),h(n),h(l),h(t),h(c),h(u),h(s)),_&&_.d(f),m=!1,o()}}}b(le,"create_fragment");function re(a,e,r){let n,l,t,c,i,d,u,s=N,m=b(()=>(s(),s=J(i,_=>r(4,u=_)),i),"$$subscribe_rowsQuery");G(a,$,_=>r(7,d=_)),a.$$.on_destroy.push(()=>s());const{bindings:o}=I("appContext"),g=Z(),k=b(()=>g.invalidateQueries({queryKey:c}),"click_handler");return a.$$.update=()=>{a.$$.dirty&128&&r(2,n=d.params.bindingName),a.$$.dirty&128&&r(0,l=d.params.tableName),a.$$.dirty&4&&r(6,t=o[n]),a.$$.dirty&5&&r(1,c=["d1",n,"tables",l]),a.$$.dirty&67&&m(r(3,i=P({queryKey:c,queryFn:()=>t.prepare(`SELECT * FROM ${l}`).all(),select:_=>_.results})))},[l,c,n,i,u,g,t,d,k]}b(re,"instance");const D=class D extends V{constructor(e){super(),W(this,e,re,le,Y,{})}};b(D,"Page");let M=D;export{M as component};

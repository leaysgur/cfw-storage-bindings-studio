var Y=Object.defineProperty;var p=(c,e)=>Y(c,"name",{value:e,configurable:!0});import{s as G,f as y,l as C,a as R,g as k,h as v,m as O,d as u,c as j,j as Q,i as E,x as g,n as F,E as D,F as J,N as P,O as X,e as I,z as Z,u as x,M as W}from"../chunks/scheduler.868b4e5c.js";import{j as N,u as $,k as ee}from"../chunks/context.e8a7e09b.js";import{S as te,i as le}from"../chunks/index.82e26aad.js";import{u as re,c as se}from"../chunks/createQuery.7eb1e000.js";import{p as ne}from"../chunks/stores.6f5893dc.js";function B(c,e,t){const l=c.slice();return l[11]=e[t],l}p(B,"get_each_context");function H(c,e,t){const l=c.slice();return l[14]=e[t],l}p(H,"get_each_context_1");function M(c,e,t){const l=c.slice();return l[17]=e[t],l}p(M,"get_each_context_2");function oe(c){const e=c.slice(),t=e[3].data;return e[10]=t,e}p(oe,"get_if_ctx");function A(c){let e,t,l,s,r,o,a,n;function f(d,i){return d[10].length!==0?_e:ae}p(f,"select_block_type_1");let _=f(c),b=_(c);return{c(){e=y("div"),t=y("button"),l=C("Refresh"),r=R(),b.c(),o=I(),this.h()},l(d){e=k(d,"DIV",{class:!0});var i=v(e);t=k(i,"BUTTON",{});var m=v(t);l=O(m,"Refresh"),m.forEach(u),i.forEach(u),r=j(d),b.l(d),o=I(),this.h()},h(){t.disabled=s=c[3].isFetching,Q(e,"class","action svelte-ba4oh4")},m(d,i){E(d,e,i),g(e,t),g(t,l),E(d,r,i),b.m(d,i),E(d,o,i),a||(n=Z(t,"click",c[8]),a=!0)},p(d,i){i&8&&s!==(s=d[3].isFetching)&&(t.disabled=s),_===(_=f(d))&&b?b.p(d,i):(b.d(1),b=_(d),b&&(b.c(),b.m(o.parentNode,o)))},d(d){d&&(u(e),u(r),u(o)),b.d(d),a=!1,n()}}}p(A,"create_if_block_2");function ie(c){let e,t,l=c[3].error.message+"",s;return{c(){e=y("pre"),t=C("ðŸ’¥ "),s=C(l)},l(r){e=k(r,"PRE",{});var o=v(e);t=O(o,"ðŸ’¥ "),s=O(o,l),o.forEach(u)},m(r,o){E(r,e,o),g(e,t),g(e,s)},p(r,o){o&8&&l!==(l=r[3].error.message+"")&&F(s,l)},d(r){r&&u(e)}}}p(ie,"create_if_block_1");function ce(c){let e;return{c(){e=C("ðŸŒ€ Loading rows...")},l(t){e=O(t,"ðŸŒ€ Loading rows...")},m(t,l){E(t,e,l)},p:D,d(t){t&&u(e)}}}p(ce,"create_if_block");function ae(c){let e,t="No records...";return{c(){e=y("p"),e.textContent=t},l(l){e=k(l,"P",{"data-svelte-h":!0}),x(e)!=="svelte-1tfohk1"&&(e.textContent=t)},m(l,s){E(l,e,s)},p:D,d(l){l&&u(e)}}}p(ae,"create_else_block");function _e(c){let e,t,l,s,r,o,a=[],n=new Map,f=N(Object.keys(c[10][0])),_=[];for(let i=0;i<f.length;i+=1)_[i]=V(M(c,f,i));let b=N(c[10]);const d=p(i=>i[11].rowid,"get_key");for(let i=0;i<b.length;i+=1){let m=B(c,b,i),h=d(m);n.set(h,a[i]=K(h,m))}return{c(){e=y("div"),t=y("table"),l=y("thead"),s=y("tr");for(let i=0;i<_.length;i+=1)_[i].c();r=R(),o=y("tbody");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var m=v(e);t=k(m,"TABLE",{});var h=v(t);l=k(h,"THEAD",{});var w=v(l);s=k(w,"TR",{});var S=v(s);for(let T=0;T<_.length;T+=1)_[T].l(S);S.forEach(u),w.forEach(u),r=j(h),o=k(h,"TBODY",{});var q=v(o);for(let T=0;T<a.length;T+=1)a[T].l(q);q.forEach(u),h.forEach(u),m.forEach(u),this.h()},h(){Q(e,"class","scroller svelte-ba4oh4")},m(i,m){E(i,e,m),g(e,t),g(t,l),g(l,s);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(s,null);g(t,r),g(t,o);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(o,null)},p(i,m){if(m&8){f=N(Object.keys(i[10][0]));let h;for(h=0;h<f.length;h+=1){const w=M(i,f,h);_[h]?_[h].p(w,m):(_[h]=V(w),_[h].c(),_[h].m(s,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=f.length}m&8&&(b=N(i[10]),a=$(a,m,d,1,i,b,n,o,ee,K,null,B))},d(i){i&&u(e),W(_,i);for(let m=0;m<a.length;m+=1)a[m].d()}}}p(_e,"create_if_block_3");function V(c){let e,t=c[17]+"",l;return{c(){e=y("th"),l=C(t),this.h()},l(s){e=k(s,"TH",{align:!0});var r=v(e);l=O(r,t),r.forEach(u),this.h()},h(){Q(e,"align","left")},m(s,r){E(s,e,r),g(e,l)},p(s,r){r&8&&t!==(t=s[17]+"")&&F(l,t)},d(s){s&&u(e)}}}p(V,"create_each_block_2");function z(c){let e,t=c[14]+"",l;return{c(){e=y("td"),l=C(t),this.h()},l(s){e=k(s,"TD",{align:!0});var r=v(e);l=O(r,t),r.forEach(u),this.h()},h(){Q(e,"align","left")},m(s,r){E(s,e,r),g(e,l)},p(s,r){r&8&&t!==(t=s[14]+"")&&F(l,t)},d(s){s&&u(e)}}}p(z,"create_each_block_1");function K(c,e){let t,l,s=N(Object.values(e[11])),r=[];for(let o=0;o<s.length;o+=1)r[o]=z(H(e,s,o));return{key:c,first:null,c(){t=y("tr");for(let o=0;o<r.length;o+=1)r[o].c();l=R(),this.h()},l(o){t=k(o,"TR",{});var a=v(t);for(let n=0;n<r.length;n+=1)r[n].l(a);l=j(a),a.forEach(u),this.h()},h(){this.first=t},m(o,a){E(o,t,a);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(t,null);g(t,l)},p(o,a){if(e=o,a&8){s=N(Object.values(e[11]));let n;for(n=0;n<s.length;n+=1){const f=H(e,s,n);r[n]?r[n].p(f,a):(r[n]=z(f),r[n].c(),r[n].m(t,l))}for(;n<r.length;n+=1)r[n].d(1);r.length=s.length}},d(o){o&&u(t),W(r,o)}}}p(K,"create_each_block");function he(c){let e,t,l,s;function r(f,_){if(f[3].isLoading)return ce;if(f[3].isError)return ie;if(f[3].isSuccess)return A}p(r,"select_block_type");function o(f,_){return _===A?oe(f):f}p(o,"select_block_ctx");let a=r(c),n=a&&a(o(c,a));return{c(){e=y("section"),t=y("h3"),l=C(c[0]),s=R(),n&&n.c(),this.h()},l(f){e=k(f,"SECTION",{class:!0});var _=v(e);t=k(_,"H3",{});var b=v(t);l=O(b,c[0]),b.forEach(u),s=j(_),n&&n.l(_),_.forEach(u),this.h()},h(){Q(e,"class","svelte-ba4oh4")},m(f,_){E(f,e,_),g(e,t),g(t,l),g(e,s),n&&n.m(e,null)},p(f,[_]){_&1&&F(l,f[0]),a===(a=r(f))&&n?n.p(o(f,a),_):(n&&n.d(1),n=a&&a(o(f,a)),n&&(n.c(),n.m(e,null)))},i:D,o:D,d(f){f&&u(e),n&&n.d()}}}p(he,"create_fragment");function fe(c,e,t){let l,s,r,o,a,n,f,_=D,b=p(()=>(_(),_=X(a,h=>t(3,f=h)),a),"$$subscribe_rowsQuery");J(c,ne,h=>t(7,n=h)),c.$$.on_destroy.push(()=>_());const{bindings:d}=P("appContext"),i=re(),m=p(()=>i.invalidateQueries({queryKey:o}),"click_handler");return c.$$.update=()=>{c.$$.dirty&128&&t(6,l=n.params.bindingName),c.$$.dirty&128&&t(0,s=n.params.tableName),c.$$.dirty&64&&t(5,r=d[l]),c.$$.dirty&65&&t(1,o=["d1",l,"tables",s]),c.$$.dirty&35&&b(t(2,a=se({queryKey:o,queryFn:()=>r.prepare(`SELECT ROWID, * FROM ${s}`).all(),select:h=>h.results})))},[s,o,a,f,i,r,l,n,m]}p(fe,"instance");const L=class L extends te{constructor(e){super(),le(this,e,fe,he,G,{})}};p(L,"Page");let U=L;export{U as component};

var A=Object.defineProperty;var m=(n,i)=>A(n,"name",{value:i,configurable:!0});import{s as B,d as D,u as I,e as K,h as M,l as O,m as G,n as J}from"../chunks/scheduler.8c8bb1bf.js";import{S as V,i as X,m as k,s as S,g as R,n as E,c as T,h as Q,j as F,f as u,a as d,x as L,z as Y,o as j,d as Z,t as x,y as ee,k as P}from"../chunks/index.934348cb.js";import{j as U}from"../chunks/context.f1412b6d.js";import{u as te,c as le}from"../chunks/createQuery.03e5834d.js";import{p as ie}from"../chunks/stores.92194a63.js";function $(n,i,s){const t=n.slice();return t[12]=i[s][0],t}m($,"get_each_context");function se(n){let i,s=U(n[3].data),t=[];for(let a=0;a<s.length;a+=1)t[a]=w($(n,s,a));return{c(){i=R("ul");for(let a=0;a<t.length;a+=1)t[a].c()},l(a){i=Q(a,"UL",{});var r=F(i);for(let e=0;e<t.length;e+=1)t[e].l(r);r.forEach(u)},m(a,r){d(a,i,r);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(i,null)},p(a,r){if(r&9){s=U(a[3].data);let e;for(e=0;e<s.length;e+=1){const f=$(a,s,e);t[e]?t[e].p(f,r):(t[e]=w(f),t[e].c(),t[e].m(i,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=s.length}},d(a){a&&u(i),ee(t,a)}}}m(se,"create_if_block_2");function ae(n){let i,s,t=n[3].error.message+"",a;return{c(){i=R("pre"),s=k("ðŸ’¥ "),a=k(t)},l(r){i=Q(r,"PRE",{});var e=F(i);s=E(e,"ðŸ’¥ "),a=E(e,t),e.forEach(u)},m(r,e){d(r,i,e),L(i,s),L(i,a)},p(r,e){e&8&&t!==(t=r[3].error.message+"")&&j(a,t)},d(r){r&&u(i)}}}m(ae,"create_if_block_1");function re(n){let i;return{c(){i=k("ðŸŒ€ Loading tables...")},l(s){i=E(s,"ðŸŒ€ Loading tables...")},m(s,t){d(s,i,t)},p:J,d(s){s&&u(i)}}}m(re,"create_if_block");function w(n){let i,s,t=n[12]+"",a,r;return{c(){i=R("li"),s=R("a"),a=k(t),this.h()},l(e){i=Q(e,"LI",{});var f=F(i);s=Q(f,"A",{href:!0});var b=F(s);a=E(b,t),b.forEach(u),f.forEach(u),this.h()},h(){P(s,"href",r=`/d1/${n[0]}/${n[12]}`)},m(e,f){d(e,i,f),L(i,s),L(s,a)},p(e,f){f&8&&t!==(t=e[12]+"")&&j(a,t),f&9&&r!==(r=`/d1/${e[0]}/${e[12]}`)&&P(s,"href",r)},d(e){e&&u(i)}}}m(w,"create_each_block");function ne(n){let i,s=n[1].params.bindingName+"",t,a,r,e,f,b,g,v,q,h,C,N;function c(l,o){if(l[3].isLoading)return re;if(l[3].isError)return ae;if(l[3].isSuccess)return se}m(c,"select_block_type");let y=c(n),_=y&&y(n);const W=n[7].default,p=D(W,n,n[6],null);return{c(){i=k("d1/"),t=k(s),a=S(),r=R("button"),e=k("Refresh"),b=S(),_&&_.c(),g=S(),v=R("hr"),q=S(),p&&p.c(),this.h()},l(l){i=E(l,"d1/"),t=E(l,s),a=T(l),r=Q(l,"BUTTON",{});var o=F(r);e=E(o,"Refresh"),o.forEach(u),b=T(l),_&&_.l(l),g=T(l),v=Q(l,"HR",{}),q=T(l),p&&p.l(l),this.h()},h(){r.disabled=f=n[3].isFetching},m(l,o){d(l,i,o),d(l,t,o),d(l,a,o),d(l,r,o),L(r,e),d(l,b,o),_&&_.m(l,o),d(l,g,o),d(l,v,o),d(l,q,o),p&&p.m(l,o),h=!0,C||(N=Y(r,"click",n[8]),C=!0)},p(l,[o]){(!h||o&2)&&s!==(s=l[1].params.bindingName+"")&&j(t,s),(!h||o&8&&f!==(f=l[3].isFetching))&&(r.disabled=f),y===(y=c(l))&&_?_.p(l,o):(_&&_.d(1),_=y&&y(l),_&&(_.c(),_.m(g.parentNode,g))),p&&p.p&&(!h||o&64)&&I(p,W,l,l[6],h?M(W,l[6],o,null):K(l[6]),null)},i(l){h||(Z(p,l),h=!0)},o(l){x(p,l),h=!1},d(l){l&&(u(i),u(t),u(a),u(r),u(b),u(g),u(v),u(q)),_&&_.d(l),p&&p.d(l),C=!1,N()}}}m(ne,"create_fragment");function oe(n,i,s){let t,a,r,e,f;O(n,ie,c=>s(1,e=c));let{$$slots:b={},$$scope:g}=i;const v=m(c=>!(c.startsWith("_cf")||c.startsWith("sqlite_")||c.startsWith("d1_")),"filterPrivateTables"),{bindings:q}=G("appContext"),h=te(),C=le({queryKey:r,queryFn:()=>a.prepare("SELECT tbl_name FROM sqlite_master WHERE type == ?").bind("table").raw(),select:c=>c.filter(y=>v(y[0]))});O(n,C,c=>s(3,f=c));const N=m(()=>h.invalidateQueries({queryKey:r}),"click_handler");return n.$$set=c=>{"$$scope"in c&&s(6,g=c.$$scope)},n.$$.update=()=>{n.$$.dirty&2&&s(0,t=e.params.bindingName),n.$$.dirty&1&&(a=q[t]),n.$$.dirty&1&&s(2,r=["d1",t,"tables"])},[t,e,r,f,h,C,g,b,N]}m(oe,"instance");const H=class H extends V{constructor(i){super(),X(this,i,oe,ne,B,{})}};m(H,"Layout");let z=H;export{z as component};

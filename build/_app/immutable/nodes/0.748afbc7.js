var Se=Object.defineProperty;var as=(a,t,e)=>t in a?Se(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var u=(a,t)=>Se(a,"name",{value:t,configurable:!0});var I=(a,t,e)=>(as(a,typeof t!="symbol"?t+"":t,e),e),Yt=(a,t,e)=>{if(!t.has(a))throw TypeError("Cannot "+e)};var i=(a,t,e)=>(Yt(a,t,"read from private field"),e?e.call(a):t.get(a)),f=(a,t,e)=>{if(t.has(a))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(a):t.set(a,e)},d=(a,t,e,s)=>(Yt(a,t,"write to private field"),s?s.call(a,e):t.set(a,e),e);var Xt=(a,t,e,s)=>({set _(r){d(a,t,r,e)},get _(){return i(a,t,s)}}),y=(a,t,e)=>(Yt(a,t,"access private method"),e);import{i as is,g as cs,c as Ht,f as os,s as Xe,d as He,u as We,e as Le,h as ze,o as Je,j as us,k as hs,n as wt}from"../chunks/scheduler.8c8bb1bf.js";import{p as ls,t as Tt,b as ds,d as Kt,S as Ye,i as Ze,e as Be,a as K,f as k,g as It,m as H,h as Dt,j as Lt,n as W,x as P,o as se,s as re,r as fs,c as ne,u as ps,v as ys,y as ms,w as gs,k as Ne}from"../chunks/index.c03294ce.js";import{r as bs,n as B,t as ws,c as Es,a as _,i as Zt,b as Is,S as ts,h as es,m as Re,d as Ae,f as Ce,o as Ue,e as Ds,g as Fe,p as qe,s as Os,j as Qe}from"../chunks/context.5b4701d7.js";import{U as ss,N as _s,P as vs,a as js,b as rs,H as Ms,p as Pe}from"../chunks/parse.457da179.js";import{R as ks,M as Ss,i as Bs}from"../chunks/infiniteQueryBehavior.ef35ab7f.js";function Ge(a,t){const e=t.token={};function s(r,n,o,p){if(t.token!==e)return;t.resolved=p;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=p);const c=r&&(t.current=r)(l);let g=!1;t.block&&(t.blocks?t.blocks.forEach((h,m)=>{m!==n&&h&&(ls(),Tt(h,1,1,()=>{t.blocks[m]===h&&(t.blocks[m]=null)}),ds())}):t.block.d(1),c.c(),Kt(c,1),c.m(t.mount(),t.anchor),g=!0),t.block=c,t.blocks&&(t.blocks[n]=c),g&&os()}if(u(s,"update"),is(a)){const r=cs();if(a.then(n=>{Ht(r),s(t.then,1,t.value,n),Ht(null)},n=>{if(Ht(r),s(t.catch,2,t.error,n),Ht(null),!t.hasCatch)throw n}),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,a),!0;t.resolved=a}}u(Ge,"handle_promise");function Ns(a,t,e){const s=t.slice(),{resolved:r}=a;a.current===a.then&&(s[a.value]=r),a.current===a.catch&&(s[a.error]=r),a.block.p(s,e)}u(Ns,"update_await_block_branch");const me=class me extends Error{constructor(t,e){super(t),this.name="DevalueError",this.path=e.join("")}};u(me,"DevalueError");let Et=me;function $e(a){return Object(a)!==a}u($e,"is_primitive");const Rs=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function As(a){const t=Object.getPrototypeOf(a);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Rs}u(As,"is_plain_object");function Cs(a){return Object.prototype.toString.call(a).slice(8,-1)}u(Cs,"get_type");function Us(a){switch(a){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return a<" "?`\\u${a.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}u(Us,"get_escaped_char");function rt(a){let t="",e=0;const s=a.length;for(let r=0;r<s;r+=1){const n=a[r],o=Us(n);o&&(t+=a.slice(e,r)+o,e=r+1)}return`"${e===0?a:t+a.slice(e)}"`}u(rt,"stringify_string");function Vt(a,t){const e=[],s=new Map,r=[];for(const c in t)r.push({key:c,fn:t[c]});const n=[];let o=0;function p(c){if(typeof c=="function")throw new Et("Cannot stringify a function",n);if(s.has(c))return s.get(c);if(c===void 0)return ss;if(Number.isNaN(c))return _s;if(c===1/0)return vs;if(c===-1/0)return js;if(c===0&&1/c<0)return rs;const g=o++;s.set(c,g);for(const{key:m,fn:O}of r){const w=O(c);if(w)return e[g]=`["${m}",${p(w)}]`,g}let h="";if($e(c))h=te(c);else switch(Cs(c)){case"Number":case"String":case"Boolean":h=`["Object",${te(c)}]`;break;case"BigInt":h=`["BigInt",${c}]`;break;case"Date":h=`["Date","${c.toISOString()}"]`;break;case"RegExp":const{source:O,flags:w}=c;h=w?`["RegExp",${rt(O)},"${w}"]`:`["RegExp",${rt(O)}]`;break;case"Array":h="[";for(let b=0;b<c.length;b+=1)b>0&&(h+=","),b in c?(n.push(`[${b}]`),h+=p(c[b]),n.pop()):h+=Ms;h+="]";break;case"Set":h='["Set"';for(const b of c)h+=`,${p(b)}`;h+="]";break;case"Map":h='["Map"';for(const[b,S]of c)n.push(`.get(${$e(b)?te(b):"..."})`),h+=`,${p(b)},${p(S)}`;h+="]";break;default:if(!As(c))throw new Et("Cannot stringify arbitrary non-POJOs",n);if(Object.getOwnPropertySymbols(c).length>0)throw new Et("Cannot stringify POJOs with symbolic keys",n);if(Object.getPrototypeOf(c)===null){h='["null"';for(const b in c)n.push(`.${b}`),h+=`,${rt(b)},${p(c[b])}`,n.pop();h+="]"}else{h="{";let b=!1;for(const S in c)b&&(h+=","),b=!0,n.push(`.${S}`),h+=`${rt(S)}:${p(c[S])}`,n.pop();h+="}"}}return e[g]=h,g}u(p,"flatten");const l=p(a);return l<0?`${l}`:`[${e.join(",")}]`}u(Vt,"stringify");function te(a){const t=typeof a;return t==="string"?rt(a):a instanceof String?rt(a.toString()):a===void 0?ss.toString():a===0&&1/a<0?rs.toString():t==="bigint"?`["BigInt","${a}"]`:String(a)}u(te,"stringify_primitive");const st=u(a=>({bridgeWorkerOrigin:(a==null?void 0:a.bridgeWorkerOrigin)??"http://127.0.0.1:8787"}),"resolveModuleOptions"),ee=u(a=>encodeURIComponent(a),"encodeKey$1");var Ot,_t,L,mt;const ge=class ge{constructor(t,e){f(this,L);f(this,Ot,void 0);f(this,_t,void 0);d(this,Ot,t);const{bridgeWorkerOrigin:s}=st(e);d(this,_t,s)}async list(t){return await(await y(this,L,mt).call(this,"KVNamespace.list",[t])).json()}async put(t,e,s){await y(this,L,mt).call(this,"KVNamespace.put",[ee(t),s],e)}async get(t,e){const{value:s}=await this.getWithMetadata(t,e);return s}async getWithMetadata(t,e){const s=await y(this,L,mt).call(this,"KVNamespace.getWithMetadata",[ee(t),e]);if(s.headers.get("X-BRIDGE-KV-ValueIsNull")==="true")return{value:null,metadata:null,cacheStatus:null};let r;typeof(e==null?void 0:e.type)=="string"?r=e.type:typeof e=="string"?r=e:r="text";let n;r==="json"&&(n=await s.json()),r==="text"&&(n=await s.text()),r==="arrayBuffer"&&(n=await s.arrayBuffer()),r==="stream"&&(n=s.body);const o=Pe(s.headers.get("X-BRIDGE-KV-Metadata")??"[null]"),p=Pe(s.headers.get("X-BRIDGE-KV-CacheStatus")??"[null]");return{value:n,metadata:o,cacheStatus:p}}async delete(t){await y(this,L,mt).call(this,"KVNamespace.delete",[ee(t)])}};Ot=new WeakMap,_t=new WeakMap,L=new WeakSet,mt=u(async function(t,e,s){const r=await fetch(i(this,_t),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"KV","X-BRIDGE-BINDING-NAME":i(this,Ot),"X-BRIDGE-KV-Dispatch":Vt({operation:t,parameters:e})},body:s,duplex:"half"});if(!r.ok){const n=await r.text();throw new Error(n)}return r},"#dispatch"),u(ge,"KVNamespace$");let ae=ge;var vt,jt;const be=class be{constructor(t,e){f(this,vt,void 0);f(this,jt,void 0);d(this,vt,t);const{bridgeWorkerOrigin:s}=st(e);d(this,jt,s)}async fetch(t,e){const s=new Request(t,e),r=new Request(i(this,jt),s);return r.headers.set("X-BRIDGE-BINDING-MODULE","SERVICE"),r.headers.set("X-BRIDGE-BINDING-NAME",i(this,vt)),r.headers.set("X-BRIDGE-SERVICE-Dispatch",JSON.stringify({operation:"Fetcher.fetch",parameters:[s.url]})),fetch(r)}};vt=new WeakMap,jt=new WeakMap,u(be,"Fetcher$");let ie=be;const yt=u(a=>{const t=new Uint8Array(a.length/2);for(let e=0;e<a.length;e+=2)t[e/2]=parseInt(a.substring(e,e+2),16);return t.buffer},"hexStringToArrayBuffer"),Fs=u(a=>{const t=new Uint8Array(a);let e="";for(let s=0;s<t.length;s++){const r=t[s].toString(16);e+=r.length===1?"0"+r:r}return e},"arrayBufferToHexString"),q=u(a=>encodeURIComponent(a),"encodeKey");var Mt;const we=class we{constructor(t){f(this,Mt,void 0);I(this,"md5");I(this,"sha1");I(this,"sha256");I(this,"sha384");I(this,"sha512");d(this,Mt,t),this.md5=t.md5?yt(t.md5):void 0,this.sha1=t.sha1?yt(t.sha1):void 0,this.sha256=t.sha256?yt(t.sha256):void 0,this.sha384=t.sha384?yt(t.sha384):void 0,this.sha512=t.sha512?yt(t.sha512):void 0,Object.freeze(this)}toJSON(){return i(this,Mt)}};Mt=new WeakMap,u(we,"Checksums$");let ce=we;const Ee=class Ee{constructor(t){I(this,"key");I(this,"version");I(this,"size");I(this,"etag");I(this,"httpEtag");I(this,"checksums");I(this,"uploaded");I(this,"httpMetadata");I(this,"customMetadata");I(this,"range");this.key=t.key,this.version=t.version,this.size=t.size,this.etag=t.etag,this.httpEtag=t.httpEtag,this.checksums=new ce(t.checksums),this.uploaded=new Date(t.uploaded),this.httpMetadata={...t.httpMetadata,cacheExpiry:t.httpMetadata.cacheExpiry?new Date(t.httpMetadata.cacheExpiry):void 0},t.httpMetadata.cacheExpiry||delete this.httpMetadata.cacheExpiry,this.customMetadata=t.customMetadata,this.range=t.range,Object.freeze(this)}writeHttpMetadata(t){var e,s,r,n,o,p;(e=this.httpMetadata)!=null&&e.contentType&&t.set("content-type",this.httpMetadata.contentType),(s=this.httpMetadata)!=null&&s.contentLanguage&&t.set("content-language",this.httpMetadata.contentLanguage),(r=this.httpMetadata)!=null&&r.contentDisposition&&t.set("content-disposition",this.httpMetadata.contentDisposition),(n=this.httpMetadata)!=null&&n.contentEncoding&&t.set("content-encoding",this.httpMetadata.contentEncoding),(o=this.httpMetadata)!=null&&o.cacheControl&&t.set("cache-control",this.httpMetadata.cacheControl),(p=this.httpMetadata)!=null&&p.cacheExpiry&&t.set("expires",this.httpMetadata.cacheExpiry.toUTCString())}};u(Ee,"HeadResult$");let V=Ee;var A;const Ie=class Ie extends V{constructor(e,s){super(e);f(this,A,void 0);d(this,A,s)}get body(){return i(this,A).body??new ReadableStream}get bodyUsed(){return i(this,A).bodyUsed}async arrayBuffer(){return i(this,A).arrayBuffer()}async text(){return i(this,A).text()}async json(){return i(this,A).json()}async blob(){return i(this,A).blob()}};A=new WeakMap,u(Ie,"GetResult$");let oe=Ie;var z;const De=class De{constructor({key:t,uploadId:e},s){f(this,z,void 0);I(this,"key");I(this,"uploadId");d(this,z,s),this.key=t,this.uploadId=e,Object.freeze(this)}async uploadPart(t,e){return await(await i(this,z).call(this,"R2MultipartUpload.uploadPart",[q(this.key),this.uploadId,t],e)).json()}async abort(){await i(this,z).call(this,"R2MultipartUpload.abort",[q(this.key),this.uploadId])}async complete(t){const s=await(await i(this,z).call(this,"R2MultipartUpload.complete",[q(this.key),this.uploadId,t])).json();return new V(s)}};z=new WeakMap,u(De,"R2MultipartUpload$");let zt=De;var kt,St,N,U;const Oe=class Oe{constructor(t,e){f(this,N);f(this,kt,void 0);f(this,St,void 0);d(this,kt,t);const{bridgeWorkerOrigin:s}=st(e);d(this,St,s)}async list(t){const s=await(await y(this,N,U).call(this,"R2Bucket.list",[t])).json();return{...s,objects:s.objects.map(r=>new V(r))}}async put(t,e,s){const n=await(await y(this,N,U).call(this,"R2Bucket.put",[q(t),null,s],e??void 0)).json();return n===null?null:new V(n)}async get(t,e){const s=await y(this,N,U).call(this,"R2Bucket.get",[q(t),e]),r=s.headers.get("X-BRIDGE-R2-R2ObjectJSON");if(r){const o=JSON.parse(r);return new oe(o,s)}const n=await s.json();return n===null?null:new V(n)}async head(t){const s=await(await y(this,N,U).call(this,"R2Bucket.head",[q(t)])).json();return s===null?null:new V(s)}async delete(t){t=typeof t=="string"?q(t):t.map(e=>q(e)),await y(this,N,U).call(this,"R2Bucket.delete",[t])}async createMultipartUpload(t,e){const r=await(await y(this,N,U).call(this,"R2Bucket.createMultipartUpload",[q(t),e])).json();return new zt(r,y(this,N,U).bind(this))}resumeMultipartUpload(t,e){return new zt({key:t,uploadId:e},y(this,N,U).bind(this))}};kt=new WeakMap,St=new WeakMap,N=new WeakSet,U=u(async function(t,e,s){const r=await fetch(i(this,St),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"R2","X-BRIDGE-BINDING-NAME":i(this,kt),"X-BRIDGE-R2-Dispatch":Vt({operation:t,parameters:e},{Headers:n=>n instanceof Headers&&Array.from(n),ArrayBuffer:n=>n instanceof ArrayBuffer&&Fs(n)})},body:s,duplex:"half"});if(!r.ok){const n=await r.text();throw new Error(n)}return r},"#dispatch"),u(Oe,"R2Bucket$");let ue=Oe;const qs=u(a=>a.map(t=>t instanceof ArrayBuffer?Array.from(new Uint8Array(t)):ArrayBuffer.isView(t)?Array.from(t):t),"encodeBindValues");var J,nt,at,Y,gt;const Jt=class Jt{constructor(t,e,s){f(this,Y);f(this,J,void 0);f(this,nt,void 0);f(this,at,void 0);d(this,J,t),d(this,nt,e),d(this,at,s)}get statement(){return i(this,J)}get params(){return i(this,nt)}bind(...t){return new Jt(i(this,J),qs(t),i(this,at))}async first(t){return y(this,Y,gt).call(this,"D1PreparedStatement.first",t)}async run(){return y(this,Y,gt).call(this,"D1PreparedStatement.run")}async all(){return y(this,Y,gt).call(this,"D1PreparedStatement.all")}async raw(){return y(this,Y,gt).call(this,"D1PreparedStatement.raw")}};J=new WeakMap,nt=new WeakMap,at=new WeakMap,Y=new WeakSet,gt=u(async function(t,e){return await(await i(this,at).call(this,t,[i(this,J),i(this,nt),e])).json()},"#send"),u(Jt,"D1PreparedStatement$");let he=Jt;var Bt,Nt,Z,bt;const _e=class _e{constructor(t,e){f(this,Z);f(this,Bt,void 0);f(this,Nt,void 0);d(this,Bt,t);const{bridgeWorkerOrigin:s}=st(e);d(this,Nt,s)}prepare(t){return new he(t,[],y(this,Z,bt).bind(this))}async dump(){return await(await y(this,Z,bt).call(this,"D1Database.dump",[])).arrayBuffer()}async batch(t){return await(await y(this,Z,bt).call(this,"D1Database.batch",[t.map(r=>{const n=r;return[n.statement,n.params]})])).json()}async exec(t){return await(await y(this,Z,bt).call(this,"D1Database.exec",[t])).json()}};Bt=new WeakMap,Nt=new WeakMap,Z=new WeakSet,bt=u(async function(t,e){const s=await fetch(i(this,Nt),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"D1","X-BRIDGE-BINDING-NAME":i(this,Bt)},body:Vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(_e,"D1Database$");let le=_e;var Rt,At,Ct,fe;const ve=class ve{constructor(t,e){f(this,Ct);f(this,Rt,void 0);f(this,At,void 0);d(this,Rt,t);const{bridgeWorkerOrigin:s}=st(e);d(this,At,s)}async send(t,e){await y(this,Ct,fe).call(this,"Queue.send",[t,e])}async sendBatch(t){await y(this,Ct,fe).call(this,"Queue.sendBatch",[t])}};Rt=new WeakMap,At=new WeakMap,Ct=new WeakSet,fe=u(async function(t,e){const s=await fetch(i(this,At),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"QUEUE","X-BRIDGE-BINDING-NAME":i(this,Rt)},body:Vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(ve,"WorkerQueue$");let de=ve;var Ut,Ft,Q,X;const je=class je{constructor(t,e){f(this,Q);f(this,Ut,void 0);f(this,Ft,void 0);d(this,Ut,t);const{bridgeWorkerOrigin:s}=st(e);d(this,Ft,s)}async describe(){return await(await y(this,Q,X).call(this,"VectorizeIndex.describe",[])).json()}async query(t,e){return await(await y(this,Q,X).call(this,"VectorizeIndex.query",[t,e])).json()}async insert(t){return await(await y(this,Q,X).call(this,"VectorizeIndex.insert",[t])).json()}async upsert(t){return await(await y(this,Q,X).call(this,"VectorizeIndex.upsert",[t])).json()}async deleteByIds(t){return await(await y(this,Q,X).call(this,"VectorizeIndex.deleteByIds",[t])).json()}async getByIds(t){return await(await y(this,Q,X).call(this,"VectorizeIndex.getByIds",[t])).json()}};Ut=new WeakMap,Ft=new WeakMap,Q=new WeakSet,X=u(async function(t,e){const s=await fetch(i(this,Ft),{method:"POST",headers:{"X-BRIDGE-BINDING-MODULE":"VECTORIZE","X-BRIDGE-BINDING-NAME":i(this,Ut)},body:Vt({operation:t,parameters:e})});if(!s.ok){const r=await s.text();throw new Error(r)}return s},"#dispatch"),u(je,"VectorizeIndex$");let pe=je;const Qs=u(async a=>{const{bridgeWorkerOrigin:t}=st(a),s=await(await fetch(t,{headers:{"X-BRIDGE-INTERNALS":"getBindings","content-type":"application/json"}})).json(),r={};for(const[n,o]of Object.entries(s))o==="d1"&&(r[n]=new le(n,a)),o==="kv"&&(r[n]=new ae(n,a)),o==="queue"&&(r[n]=new de(n,a)),o==="r2"&&(r[n]=new ue(n,a)),o==="service"&&(r[n]=new ie(n,a)),o==="vectorize"&&(r[n]=new pe(n,a));return r},"getBindings");var it,ct,v,G,j,D,qt,tt,ot,Wt,R,F,Qt,Ps=(Qt=class extends ks{constructor(e){super();f(this,ot);f(this,R);f(this,it,void 0);f(this,ct,void 0);f(this,v,void 0);f(this,G,void 0);f(this,j,void 0);f(this,D,void 0);f(this,qt,void 0);f(this,tt,void 0);d(this,tt,!1),d(this,qt,e.defaultOptions),y(this,ot,Wt).call(this,e.options),d(this,D,[]),d(this,v,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,d(this,it,e.state||Gs(this.options)),this.state=i(this,it),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!i(this,D).length&&this.state.fetchStatus==="idle"&&i(this,v).remove(this)}setData(e,s){const r=bs(this.state.data,e,this.options);return y(this,R,F).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){y(this,R,F).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r;const s=i(this,G);return(r=i(this,j))==null||r.cancel(e),s?s.then(B).catch(B):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,it))}isActive(){return i(this,D).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||i(this,D).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ws(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=i(this,D).find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,j))==null||s.continue()}onOnline(){var s;const e=i(this,D).find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,j))==null||s.continue()}addObserver(e){i(this,D).includes(e)||(i(this,D).push(e),this.clearGcTimeout(),i(this,v).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){i(this,D).includes(e)&&(d(this,D,i(this,D).filter(s=>s!==e)),i(this,D).length||(i(this,j)&&(i(this,tt)?i(this,j).cancel({revert:!0}):i(this,j).cancelRetry()),this.scheduleGc()),i(this,v).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return i(this,D).length}invalidate(){this.state.isInvalidated||y(this,R,F).call(this,{type:"invalidate"})}fetch(e,s){var g,h,m,O;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(i(this,G))return(g=i(this,j))==null||g.continueRetry(),i(this,G)}if(e&&y(this,ot,Wt).call(this,e),!this.options.queryFn){const w=i(this,D).find(b=>b.options.queryFn);w&&y(this,ot,Wt).call(this,w.options)}const r=new AbortController,n={queryKey:this.queryKey,meta:this.meta},o=u(w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(d(this,tt,!0),r.signal)})},"addSignalProperty");o(n);const p=u(()=>this.options.queryFn?(d(this,tt,!1),this.options.persister?this.options.persister(this.options.queryFn,n,this):this.options.queryFn(n)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),"fetchFn"),l={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:p};o(l),(h=this.options.behavior)==null||h.onFetch(l,this),d(this,ct,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&y(this,R,F).call(this,{type:"fetch",meta:(O=l.fetchOptions)==null?void 0:O.meta});const c=u(w=>{var b,S,ft,pt;Zt(w)&&w.silent||y(this,R,F).call(this,{type:"error",error:w}),Zt(w)||((S=(b=i(this,v).config).onError)==null||S.call(b,w,this),(pt=(ft=i(this,v).config).onSettled)==null||pt.call(ft,this.state.data,w,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},"onError");return d(this,j,Es({fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:w=>{var b,S,ft,pt;if(typeof w>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(w),(S=(b=i(this,v).config).onSuccess)==null||S.call(b,w,this),(pt=(ft=i(this,v).config).onSettled)==null||pt.call(ft,w,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(w,b)=>{y(this,R,F).call(this,{type:"failed",failureCount:w,error:b})},onPause:()=>{y(this,R,F).call(this,{type:"pause"})},onContinue:()=>{y(this,R,F).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),d(this,G,i(this,j).promise),i(this,G)}},it=new WeakMap,ct=new WeakMap,v=new WeakMap,G=new WeakMap,j=new WeakMap,D=new WeakMap,qt=new WeakMap,tt=new WeakMap,ot=new WeakSet,Wt=u(function(e){this.options={...i(this,qt),...e},this.updateGcTime(this.options.gcTime)},"#setOptions"),R=new WeakSet,F=u(function(e){const s=u(r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:Is(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Zt(n)&&n.revert&&i(this,ct)?{...i(this,ct),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}},"reducer");this.state=s(this.state),_.batch(()=>{i(this,D).forEach(r=>{r.onQueryUpdate()}),i(this,v).notify({query:this,type:"updated",action:e})})},"#dispatch"),u(Qt,"Query"),Qt);function Gs(a){const t=typeof a.initialData=="function"?a.initialData():a.initialData,e=typeof t<"u",s=e?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}u(Gs,"getDefaultState");var C,Pt,$s=(Pt=class extends ts{constructor(e={}){super();f(this,C,void 0);this.config=e,d(this,C,new Map)}build(e,s,r){const n=s.queryKey,o=s.queryHash??es(n,s);let p=this.get(o);return p||(p=new Ps({cache:this,queryKey:n,queryHash:o,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(p)),p}add(e){i(this,C).has(e.queryHash)||(i(this,C).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,C).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,C).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,C).get(e)}getAll(){return[...i(this,C).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Re(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Re(e,r)):s}notify(e){_.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){_.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},C=new WeakMap,u(Pt,"QueryCache"),Pt),M,Gt,et,$t,xs=($t=class extends ts{constructor(e={}){super();f(this,M,void 0);f(this,Gt,void 0);f(this,et,void 0);this.config=e,d(this,M,[]),d(this,Gt,0)}build(e,s,r){const n=new Ss({mutationCache:this,mutationId:++Xt(this,Gt)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){i(this,M).push(e),this.notify({type:"added",mutation:e})}remove(e){d(this,M,i(this,M).filter(s=>s!==e)),this.notify({type:"removed",mutation:e})}clear(){_.batch(()=>{i(this,M).forEach(e=>{this.remove(e)})})}getAll(){return i(this,M)}find(e){const s={exact:!0,...e};return i(this,M).find(r=>Ae(s,r))}findAll(e={}){return i(this,M).filter(s=>Ae(e,s))}notify(e){_.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){return d(this,et,(i(this,et)??Promise.resolve()).then(()=>{const e=i(this,M).filter(s=>s.state.isPaused);return _.batch(()=>e.reduce((s,r)=>s.then(()=>r.continue().catch(B)),Promise.resolve()))}).then(()=>{d(this,et,void 0)})),i(this,et)}},M=new WeakMap,Gt=new WeakMap,et=new WeakMap,u($t,"MutationCache"),$t),E,$,x,ut,ht,T,lt,dt,xt,ns=(xt=class{constructor(t={}){f(this,E,void 0);f(this,$,void 0);f(this,x,void 0);f(this,ut,void 0);f(this,ht,void 0);f(this,T,void 0);f(this,lt,void 0);f(this,dt,void 0);d(this,E,t.queryCache||new $s),d(this,$,t.mutationCache||new xs),d(this,x,t.defaultOptions||{}),d(this,ut,new Map),d(this,ht,new Map),d(this,T,0)}mount(){Xt(this,T)._++,i(this,T)===1&&(d(this,lt,Ce.subscribe(()=>{Ce.isFocused()&&(this.resumePausedMutations(),i(this,E).onFocus())})),d(this,dt,Ue.subscribe(()=>{Ue.isOnline()&&(this.resumePausedMutations(),i(this,E).onOnline())})))}unmount(){var t,e;Xt(this,T)._--,i(this,T)===0&&((t=i(this,lt))==null||t.call(this),d(this,lt,void 0),(e=i(this,dt))==null||e.call(this),d(this,dt,void 0))}isFetching(t){return i(this,E).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,$).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=i(this,E).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=i(this,E).find({queryKey:t}),n=r==null?void 0:r.state.data,o=Ds(e,n);if(typeof o>"u")return;const p=this.defaultQueryOptions({queryKey:t});return i(this,E).build(this,p).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return _.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var e;return(e=i(this,E).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=i(this,E);_.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,E),r={type:"active",...t};return _.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=_.batch(()=>i(this,E).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(B).catch(B)}invalidateQueries(t={},e={}){return _.batch(()=>{if(i(this,E).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=_.batch(()=>i(this,E).findAll(t).filter(n=>!n.isDisabled()).map(n=>{let o=n.fetch(void 0,s);return s.throwOnError||(o=o.catch(B)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(B)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const s=i(this,E).build(this,e);return s.isStaleByTime(e.staleTime)?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(B).catch(B)}fetchInfiniteQuery(t){return t.behavior=Bs(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(B).catch(B)}resumePausedMutations(){return i(this,$).resumePausedMutations()}getQueryCache(){return i(this,E)}getMutationCache(){return i(this,$)}getDefaultOptions(){return i(this,x)}setDefaultOptions(t){d(this,x,t)}setQueryDefaults(t,e){i(this,ut).set(Fe(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,ut).values()];let s={};return e.forEach(r=>{qe(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){i(this,ht).set(Fe(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,ht).values()];let s={};return e.forEach(r=>{qe(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...i(this,x).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=es(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,x).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,E).clear(),i(this,$).clear()}},E=new WeakMap,$=new WeakMap,x=new WeakMap,ut=new WeakMap,ht=new WeakMap,T=new WeakMap,lt=new WeakMap,dt=new WeakMap,u(xt,"QueryClient"),xt);function Ts(a){let t;const e=a[2].default,s=He(e,a,a[1],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,n){s&&s.m(r,n),t=!0},p(r,[n]){s&&s.p&&(!t||n&2)&&We(s,e,r,r[1],t?ze(e,r[1],n,null):Le(r[1]),null)},i(r){t||(Kt(s,r),t=!0)},o(r){Tt(s,r),t=!1},d(r){s&&s.d(r)}}}u(Ts,"create_fragment$1");function Ks(a,t,e){let{$$slots:s={},$$scope:r}=t,{client:n=new ns}=t;return Je(()=>{n.mount()}),Os(n),us(()=>{n.unmount()}),a.$$set=o=>{"client"in o&&e(0,n=o.client),"$$scope"in o&&e(1,r=o.$$scope)},[n,r,s]}u(Ks,"instance$1");const Me=class Me extends Ye{constructor(t){super(),Ze(this,t,Ks,Ts,Xe,{client:0})}};u(Me,"QueryClientProvider");let ye=Me;function xe(a,t,e){const s=a.slice();s[5]=t[e][0],s[6]=t[e][1];const r=s[2][s[6].constructor.name]??"-";return s[7]=r,s}u(xe,"get_each_context");function Vs(a){let t,e,s=a[10].message+"",r;return{c(){t=It("pre"),e=H("💥 "),r=H(s)},l(n){t=Dt(n,"PRE",{});var o=Lt(t);e=W(o,"💥 "),r=W(o,s),o.forEach(k)},m(n,o){K(n,t,o),P(t,e),P(t,r)},p(n,o){o&2&&s!==(s=n[10].message+"")&&se(r,s)},i:wt,o:wt,d(n){n&&k(t)}}}u(Vs,"create_catch_block");function Xs(a){let t,e,s,r,n,o,p=Qe(Object.entries(a[0].bindings).sort(Ke)),l=[];for(let c=0;c<p.length;c+=1)l[c]=Te(xe(a,p,c));return n=new ye({props:{client:new ns,$$slots:{default:[Hs]},$$scope:{ctx:a}}}),{c(){t=It("ul");for(let c=0;c<l.length;c+=1)l[c].c();e=re(),s=It("hr"),r=re(),fs(n.$$.fragment)},l(c){t=Dt(c,"UL",{});var g=Lt(t);for(let h=0;h<l.length;h+=1)l[h].l(g);g.forEach(k),e=ne(c),s=Dt(c,"HR",{}),r=ne(c),ps(n.$$.fragment,c)},m(c,g){K(c,t,g);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);K(c,e,g),K(c,s,g),K(c,r,g),ys(n,c,g),o=!0},p(c,g){if(g&5){p=Qe(Object.entries(c[0].bindings).sort(Ke));let m;for(m=0;m<p.length;m+=1){const O=xe(c,p,m);l[m]?l[m].p(O,g):(l[m]=Te(O),l[m].c(),l[m].m(t,null))}for(;m<l.length;m+=1)l[m].d(1);l.length=p.length}const h={};g&16&&(h.$$scope={dirty:g,ctx:c}),n.$set(h)},i(c){o||(Kt(n.$$.fragment,c),o=!0)},o(c){Tt(n.$$.fragment,c),o=!1},d(c){c&&(k(t),k(e),k(s),k(r)),ms(l,c),gs(n,c)}}}u(Xs,"create_then_block");function Te(a){let t,e,s,r=a[7]+"",n,o,p=a[5]+"",l,c,g;return{c(){t=It("li"),e=It("a"),s=H("["),n=H(r),o=H("] "),l=H(p),g=re(),this.h()},l(h){t=Dt(h,"LI",{});var m=Lt(t);e=Dt(m,"A",{href:!0});var O=Lt(e);s=W(O,"["),n=W(O,r),o=W(O,"] "),l=W(O,p),O.forEach(k),g=ne(m),m.forEach(k),this.h()},h(){Ne(e,"href",c=`/${a[7]}/${a[5]}`)},m(h,m){K(h,t,m),P(t,e),P(e,s),P(e,n),P(e,o),P(e,l),P(t,g)},p(h,m){m&1&&r!==(r=h[7]+"")&&se(n,r),m&1&&p!==(p=h[5]+"")&&se(l,p),m&1&&c!==(c=`/${h[7]}/${h[5]}`)&&Ne(e,"href",c)},d(h){h&&k(t)}}}u(Te,"create_each_block");function Hs(a){let t;const e=a[3].default,s=He(e,a,a[4],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,n){s&&s.m(r,n),t=!0},p(r,n){s&&s.p&&(!t||n&16)&&We(s,e,r,r[4],t?ze(e,r[4],n,null):Le(r[4]),null)},i(r){t||(Kt(s,r),t=!0)},o(r){Tt(s,r),t=!1},d(r){s&&s.d(r)}}}u(Hs,"create_default_slot");function Ws(a){let t;return{c(){t=H("🌀 Loading bindings...")},l(e){t=W(e,"🌀 Loading bindings...")},m(e,s){K(e,t,s)},p:wt,i:wt,o:wt,d(e){e&&k(t)}}}u(Ws,"create_pending_block");function Ls(a){let t,e,s,r={ctx:a,current:null,token:null,hasCatch:!0,pending:Ws,then:Xs,catch:Vs,error:10,blocks:[,,,]};return Ge(e=a[1],r),{c(){t=Be(),r.block.c()},l(n){t=Be(),r.block.l(n)},m(n,o){K(n,t,o),r.block.m(n,r.anchor=o),r.mount=()=>t.parentNode,r.anchor=t,s=!0},p(n,[o]){a=n,r.ctx=a,o&2&&e!==(e=a[1])&&Ge(e,r)||Ns(r,a,o)},i(n){s||(Kt(r.block),s=!0)},o(n){for(let o=0;o<3;o+=1){const p=r.blocks[o];Tt(p)}s=!1},d(n){n&&k(t),r.block.d(n),r.token=null,r=null}}}u(Ls,"create_fragment");const Ke=u(([a],[t])=>a.localeCompare(t),"func");function zs(a,t,e){let{$$slots:s={},$$scope:r}=t;const n={D1Database$:"d1",KVNamespace$:"kv",R2Bucket$:"r2"},o={bindings:{}};hs("appContext",o);let p=new Promise(()=>{});return Je(()=>{e(1,p=fetch("/settings.json").then(l=>l.json()).then(l=>l.bridgeOrigin).then(l=>Qs({bridgeWorkerOrigin:l})).then(l=>(e(0,o.bindings=l,o),l)))}),a.$$set=l=>{"$$scope"in l&&e(4,r=l.$$scope)},[o,p,n,s,r]}u(zs,"instance");const ke=class ke extends Ye{constructor(t){super(),Ze(this,t,zs,Ls,Xe,{})}};u(ke,"Layout");let Ve=ke;export{Ve as component};
